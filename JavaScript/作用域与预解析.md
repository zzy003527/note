## 作用域与预解析

- 作用域概述

  - 通常来说，一段程序代码中所用的的名字并不总是有效和可用的，而限定这个名字的**可用性的代码范围**就是这个名字的**作用域**。作用域的使用提高了程序逻辑的局部性，增强了程序的可靠性，减少了名字冲突。
  - js的作用域（es6）之前：全局作用域、局部作用域
    - 全局作用域：整个script标签  或者是一个单独的js文件
    - 局部作用域：在函数内部就是局部作用域，这个代码的名字旨在函数内部起效果和作用

- 变量的作用域

  - 在JavaScript中，根据作用域的不同，变量可以分为两种：
    - 全局变量：在全局作用域下的变量，在全局下都可以使用
      - **注意：在函数内部，没有声明直接赋值的量也属于全局变量**
    - 局部变量：在局部作用域下的变量，在函数内部的变量就是局部变量，只能在函数内部使用
      - **注意：函数的形参也可以看作是局部变量**

- 作用域链

  - 如果函数中还有函数，那么在这个作用域中就又可以诞生一个作用域
  - 根据在内部函数可以访问外部函数变量的这种机制，用链式查找决定哪些数据能被内部函数访问，就称作作用域链
  - **就近！**

  

  

- **<u>预解析</u>**

  - JavaScript代码是由浏览器中的JavaScript解析器来执行的。JavaScript解析器在运行JavaScript代码的时候分为两步，预解析和代码执行

  - 预解析js引擎会把js里面所有的var还有function提升到当前作用域的最前面

  - 预解析分为  变量预解析（变量提升） 和   函数预解析（函数提升）

    - **函数提升：就是把所有的函数声明提升到<u>当前作用域的最前面</u>，不调用函数**

    - **变量提升：就是把所有的变量声明提升到<u>当前的作用域最前面</u>，不提升赋值操作**

      - ```js
        fun();      //报错
        var fun = function() {
             console.log(22);
        }
        
        
        //相当于执行以下代码
        var fun;
        fun();
        fun = function() {
                 console.log(22);
        }
        ```