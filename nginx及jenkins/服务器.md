# 服务器

- 概念
  - 服务器通常分为独立服务器（物理服务器）、VPS 主机、虚拟主机、云服务器这几类。同时，不管是虚拟主机、VPS 主机还是云服务器，其本质上都是一台电脑，它们都由操作系统和服务器资源组成。
  
  - VPS 主机
    - VPS 主机是将**一台物理服务器**利用虚拟化技术划分成多个操作系统，每个 VPS 都可分配独立公网 IP 地址、独立操作系统、独立超大空间、独立内存、独立 CPU 资源、独立执行程序和独立系统配置等，有很大的自主权。它独享一份操作系统和服务器资源（一份 VPS 资源）。
    
  - 虚拟主机
    - 虚拟主机又被称为虚拟服务器，它是利用虚拟技术将一台物理服务器或 VPS 主机划分为多台“虚拟”服务器。所有的虚拟主机相互独立，有各自的 IP 、内存、CPU 、文档存储空间等。在外界看来虚拟主机相当于一台独立的主机，所以这种虚拟化的逻辑主机被称为“虚拟主机”。
    - 相比 VPS 主机，多个虚拟主机共用一份操作系统及服务器资源，可以说是多个用户共用一份 VPS 资源。同时阿里云将虚拟主机分为两种。共享型虚拟主机和独享型虚拟主机，他们主要的区别就是 IP 的不同，共享型虚拟主机是共享 IP 而独享型虚拟主机是独享型 IP。
    - 根据 IP 分类虚拟机，可以分为**共享 IP 虚拟机**和**独立 IP 虚拟机** 其区别在于：
      - 安全性、网站的收录：共享 IP 由于很多站点共用一个 IP ，所以如果站点经常受到黑客攻击或者 SEO 不好会影响到其他站点。但是独立 IP 就不会出现这样的问题。
      - 访问：独立 IP 的虚拟机可以使用 IP 和域名访问，但是共享 IP 虚拟机只能使用域名访问。
    
  - 云服务器
    - 云服务器是将服务器集群的资源池（多台物理服务器）利用虚拟化实现的，换句话说就是将计算机资源整合在一起，做成随用随取形式，此时就可以自由申请资源及释放资源。这也就是为什么可以弹性扩展云服务器资源的原因。
    - **常见云服务器：**
      - ECS 阿里云服务器
      - CVM 腾讯云服务器
      - BCC 百度智能云
    
    
  
- 将vue项目部署到服务器上

  - 注：此时使用的是腾讯云centos7.6服务器

  - 步骤

    - 准备工作

      1. 打包项目，生成dist文件夹
      2. 下载xshell，xftp（我用的都是7，直接搜索xshell进入官网就能下载）
      3. 打开xshell，点击左上角文件，新建
      4. 之后打开的页面中，名称自定义，主机填写服务器的公网ip；然后点击左边最上方的用户身份验证，用户名写root，密码为设置的密码，然后点击连接
      5. 然后在左方所有会话下方双击刚才创建的会话

    - 服务器安装nginx

      1. 首先在xshell的页面输入：`whereis nginx`查看服务器是否安装了nginx
      2. 如果未安装，则运行：`yum install nginx`
      3. 如果有报错,运行：`yum install epel-release`之后再运行`yum install nginx`，直到安装出现complate

    - 启动nginx

      1. 输入：`nginx`启动nginx
      2. 停止：`nginx -s stop`停止nginx
      3. 重启：`nginx -s reload`重启nginx

    - 修改nginx配置

      1. 找到nginx配置文件的存放位置，输入：`whereis nginx`

      2. 我输入后是出现了

         ```bash
         nginx: /usr/sbin/nginx /usr/lib64/nginx /etc/nginx /usr/share/nginx /usr/share/man/man3/nginx.3pm.gz /usr/share/man/man8/nginx.8.gz
         ```

      3. 此时`/etc/nginx`就是nginx配置文件的存放位置

      4. 输入`cd /etc/nginx`进入配置文件目录

      5. **注：输入`ll`为展开子目录**

      6. 进入`/etc/nginx`后输入`ll`可以查看到子目录中有一个`nginx.conf`文件，这就是nginx的配置文件

      7. 输入`vim  nginx.conf`可以进入到配置文件的内容，**点击`i`之后可以修改文件内容，修改完`Esc+两次大写的Z`退出修改**

      8. 此时，配置文件下`server`节点的第一个`listen后面的数字`就是当前nginx的端口，可以修改它 ，我把它改成了9000

      9. `server`节点的`root`后面是访问端口后出现的内容，也就是我们**打包后的项目要存放的路径**，这里我把它改成了`/home/www/dist`

      10. 改完之后输入`nginx -s reload`重启nginx

      11. 接下来打开xftp将dist复制到home/www/目录下

      12. 输入：`cd /home/`进入home，然后：`mkdir www`创建www目录

      13. 接下来`cd www`和`cd dist`到达dist目录     

      14. 部署完成

      

  - 如果项目采用了history的路由方式，将会有点击路由后刷新页面无法访问到的问题

    - 解决方法：

      - 将路由模式改为hash

      - 或者修改nginx配置：

        ```bash
        #在server节点中，error_page 404 /404.html上面添加：
        location / {
           try_files $uri $uri/ /index.html;       ---解决页面刷新404问题
        }
        ```

        

- 

- 

- 