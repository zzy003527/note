## ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®å…±äº«

#### ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ

- ç”Ÿå‘½å‘¨æœŸå’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°
  - **ç”Ÿå‘½å‘¨æœŸ**ï¼ˆLife Cycleï¼‰æ˜¯æŒ‡ä¸€ä¸ªç»„ä»¶ä»**åˆ›å»º->è¿è¡Œ->é”€æ¯**çš„æ•´ä¸ªé˜¶æ®µï¼Œ**å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªæ—¶é—´æ®µ**
  - **ç”Ÿå‘½å‘¨æœŸå‡½æ•°**ï¼šæ˜¯ç”±vueæ¡†æ¶æä¾›çš„**å†…ç½®å‡½æ•°**ï¼Œä¼šä¼´éšç€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œ**è‡ªåŠ¨æŒ‰æ¬¡åºæ‰§è¡Œ**
  - æ³¨æ„ï¼š**ç”Ÿå‘½å‘¨æœŸ**å¼ºè°ƒçš„æ˜¯**æ—¶é—´æ®µ**ï¼Œ**ç”Ÿå‘½å‘¨æœŸå‡½æ•°**å¼ºè°ƒçš„æ˜¯**æ—¶é—´ç‚¹**
- ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åˆ†ç±»
  - ç»„ä»¶åˆ›å»ºé˜¶æ®µ
  - ç»„ä»¶è¿è¡Œé˜¶æ®µ
  - ç»„ä»¶é”€æ¯é˜¶æ®µ
  - ![QQå›¾ç‰‡20220403221232](C:\Users\ZZY\Desktop\study\markdownæ’å›¾\QQå›¾ç‰‡20220403221232.png)
  - 
- ç”Ÿå‘½å‘¨æœŸå‡½æ•°
  - beforeCreate
    - ç»„ä»¶çš„**props/data/methods**å°šæœªè¢«åˆ›å»ºï¼Œéƒ½å¤„äº**ä¸å¯ç”¨**çŠ¶æ€
  - created
    - ç»„ä»¶çš„**props/data/methods**å·²åˆ›å»ºå¥½ï¼Œéƒ½å¤„äº**å¯ç”¨**çš„çŠ¶æ€ã€‚ä½†æ˜¯ç»„ä»¶çš„**æ¨¡æ¿ç»“æ„å°šæœªç”Ÿæˆ**
    - æ­¤å‡½æ•°å¸¸ç”¨äºè°ƒç”¨methodsä¸­çš„æ–¹æ³•**è¯·æ±‚æœåŠ¡å™¨çš„æ•°æ®**ï¼Œå¹¶ä¸”æŠŠè¯·æ±‚åˆ°çš„æ•°æ®**è½¬å­˜åˆ°dataä¸­**ï¼Œ**ä¾›**template**æ¨¡æ¿æ¸²æŸ“çš„æ—¶å€™ä½¿ç”¨**
  - beforeMount()
    - **å°†è¦æŠŠ**å†…å­˜ä¸­ç¼–è¯‘å¥½çš„**HTML**ç»“æ„**æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­**ã€‚æ­¤æ—¶æµè§ˆå™¨ä¸­**è¿˜æ²¡æœ‰**å½“å‰ç»„ä»¶çš„DOMç»“æ„
  - mounted()
    - å·²ç»æŠŠå†…å­˜ä¸­çš„HTMLç»“æ„ï¼ŒæˆåŠŸçš„æ¸²æŸ“åˆ°äº†æµè§ˆå™¨ä¹‹ä¸­ã€‚æ­¤æ—¶æµè§ˆå™¨ä¸­**å·²ç»åŒ…å«**äº†å½“å‰ç»„ä»¶çš„**DOMç»“æ„**
    - è¦æ“ä½œdomå…ƒç´ ï¼Œæœ€æ—©åªèƒ½åœ¨mountedå‡½æ•°ä¸­
  - -----------------------------------------ä¸Šæ–¹ä¸ºç»„ä»¶åˆ›å»ºé˜¶æ®µï¼Œä¸‹æ–¹ä¸ºç»„ä»¶è¿è¡Œé˜¶æ®µ---------------------------------------------------------------------------
  - beforeUpdate
    - **å°†è¦**æ ¹æ®å˜åŒ–è¿‡åæœ€æ–°çš„æ•°æ®ï¼Œ**é‡æ–°æ¸²æŸ“**ç»„ä»¶çš„æ¨¡æ¿ç»“æ„
    - æ­¤æ—¶æ•°æ®æ˜¯æ–°çš„ï¼Œä½†æ˜¯UIç»“æ„è¿˜æ˜¯æ—§çš„
  - updated()
    - å·²ç»æ ¹æ®æœ€æ–°çš„æ•°æ®ï¼Œ**å®Œæˆäº†**ç»„ä»¶DOMç»“æ„çš„**é‡æ–°æ¸²æŸ“**
    - å½“æ•°æ®å˜åŒ–ä¹‹åï¼Œä¸ºäº†èƒ½å¤Ÿæ“ä½œåˆ°æœ€æ–°çš„DOMç»“æ„ï¼Œå¿…é¡»æŠŠä»£ç å†™åˆ°updatedç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­
  - -----------------------------------------ä¸Šæ–¹ä¸ºç»„ä»¶è¿è¡Œé˜¶æ®µï¼Œä¸‹æ–¹ä¸ºç»„ä»¶é”€æ¯é˜¶æ®µ---------------------------------------------------------------------------
  - beforeDestroy
    - **å°†è¦é”€æ¯**æ­¤ç»„ä»¶ï¼Œæ­¤æ—¶**å°šæœªé”€æ¯**ï¼Œç»„ä»¶è¿˜å¤„äº**æ­£å¸¸å·¥ä½œ**çš„çŠ¶æ€
  - destroyed
    - ç»„ä»¶å·²ç»è¢«é”€æ¯ï¼Œæ­¤ç»„ä»¶åœ¨æµè§ˆå™¨ä¸­å¯¹åº”çš„**DOMç»“æ„**å·²è¢«**å®Œå…¨ç§»é™¤**
    - é”€æ¯å½“å‰ç»„ä»¶çš„æ•°æ®ä¾¦å¬å™¨ã€å­ç»„ä»¶ã€äº‹ä»¶ç›‘å¬
- æ€»ç»“
  - ![ç”Ÿå‘½å‘¨æœŸ.png](https://cdn.nlark.com/yuque/0/2022/png/1379492/1643297176928-5d5ac765-237c-462d-9188-84935e6c3c69.png?x-oss-process=image%2Fresize%2Cw_937%2Climit_0)
  - ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„thisæŒ‡å‘çš„æ˜¯`vm`æˆ–`ç»„ä»¶å®ä¾‹å¯¹è±¡`
  - å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­
    - `mounted`å‘é€`ajax`è¯·æ±‚ã€å¯åŠ¨å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€è®¢é˜…æ¶ˆæ¯ç­‰åˆå§‹åŒ–æ“ä½œ
    - `beforeDestroy`æ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰æ”¶å°¾å·¥ä½œ
  - å…³äºé”€æ¯`Vue`å®ä¾‹
    - é”€æ¯åå€ŸåŠ©`Vue`å¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯
    - é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆï¼Œä½†åŸç”Ÿ`DOM`äº‹ä»¶ä¾ç„¶æœ‰æ•ˆ
    - ä¸€èˆ¬ä¸ä¼šåœ¨`beforeDestroy`æ“ä½œæ•°æ®ï¼Œå› ä¸ºå³ä¾¿æ“ä½œæ•°æ®ï¼Œä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹äº†





#### ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«

- ç»„ä»¶ä¹‹é—´çš„å…³ç³»

  - åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œç»„ä»¶ä¹‹é—´çš„**æœ€å¸¸è§çš„å…³ç³»**åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç§ï¼š
    - **çˆ¶å­å…³ç³»**
    - **å…„å¼Ÿå…³ç³»**

- çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«

  - çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«åˆåˆ†ä¸ºï¼š
    - **çˆ¶ -> å­**å…±äº«æ•°æ®
    - å­ -> çˆ¶å…±äº«æ•°æ®

- çˆ¶ç»„ä»¶å‘å­ç»„ä»¶å…±äº«æ•°æ®

  - çˆ¶ç»„ä»¶å‘å­ç»„ä»¶å…±äº«æ•°æ®éœ€è¦ä½¿ç”¨**è‡ªå®šä¹‰å±æ€§**ã€‚

  - ç¤ºä¾‹ä»£ç ï¼š

    ```js
    //çˆ¶ç»„ä»¶
    <Son :msg="message" :user="userinfo"></Son>
    
    data() {
        return {
            message: 'hello vue.js',
            userinfo: {name:'zs',age:20}
        }
    }
    
    
    
    //å­ç»„ä»¶
    <template>
        <div>
             <h5>Sonç»„ä»¶</h5>
             <p>çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„msgå€¼æ˜¯ï¼š{{ msg }}</p>
             <p>çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„userå€¼æ˜¯ï¼š{{ user }}</p>
        </div>
    <?template>
                 
    props: ['msg','user']             
    ```

  - **æ³¨æ„ï¼šåœ¨ä¼ å€¼ä¹‹åä¸è¦ä¿®æ”¹propsä¸­å±æ€§çš„å€¼**

  - å› ä¸ºå¦‚æœç›´æ¥ç»™propsä¿®æ”¹èµ‹å€¼ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å­ç»„ä»¶ä¸­çš„è‡ªå®šä¹‰å±æ€§æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯çˆ¶å‘å­ä¼ çš„å¯¹è±¡ï¼›å¦‚æœç»™propså±æ€§å¯¹è±¡çš„å­å…ƒç´ ï¼ˆå¦‚user.nameï¼‰èµ‹å€¼ä¿®æ”¹ï¼Œåˆ™ä¼šå½±å“åˆ°çˆ¶å‘å­ä¼ é€’çš„é‚£ä¸ªå€¼æœ¬èº«ï¼Œä½¿å…¶ä¸€èµ·è¢«ä¿®æ”¹

- å­ç»„ä»¶å‘çˆ¶ç»„ä»¶å…±äº«æ•°æ®

  - å­ç»„ä»¶å‘çˆ¶ç»„ä»¶å…±äº«æ•°æ®ä½¿ç”¨**è‡ªå®šä¹‰äº‹ä»¶**

  - ç¤ºä¾‹ä»£ç ï¼š

    ```js
    //çˆ¶ç»„ä»¶
    //numchangeå³ä¸ºè‡ªå®šä¹‰äº‹ä»¶
    <Son @numchange="getNewCount"></Son>       
    //ä¸Šæ–¹ä¸ºç¬¬ä¸€æ­¥
    
    export default {
        data() {
            return { countFromSon: 0}
        },
        methods: {       //ä¸‹æ–¹ä¸ºç¬¬äºŒæ­¥
            getNewCount(val) {
                this.countFromSon = val
            }
        }
    }
        
    
    
    //å­ç»„ä»¶
    <p>countçš„å€¼æ˜¯{{ count }}</p>
    <button @click="add">+1</button>
    
    export default {
        data() {
            return { count: 0 }
        },
        methods: {
            add() {
                this.count += 1
                //ä¿®æ”¹æ•°æ®æ—¶ï¼Œé€šè¿‡ $emit()è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œä¸ºç¬¬ä¸‰æ­¥(this.countä¸ºnumchngeäº‹ä»¶éœ€è¦çš„å‚æ•°)
                this.$emit('numchange',this.count)
            }
        }
    }
    ```

- å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«

  - åœ¨**vue2.x**ä¸­ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´æ•°æ®å…±äº«çš„æ–¹æ¡ˆæ˜¯**EventBus**(æˆ–è€…åµŒå¥—è¾ƒæ·±çš„ç¥–å…ˆå­å­™å…³ç³»)

  - ç¤ºä¾‹ä»£ç ï¼š

    ```js
    //æ•°æ®å‘é€æ–¹
    import bus from './eventBus.js'
    
    export default {
        data() {
            return {
                msg:'hello vue.js'
            }
        },
        methods: {
            sendMsg() {       //è§¦å‘shareäº‹ä»¶ï¼Œä¼ å‡ºthis.msg
                bus.$emit('share',this.msg)
            }
        }
    }
    
    
    //eventBus.js
    import Vue from 'vue'
    //å‘å¤–å…±äº«Vueçš„å®ä¾‹å¯¹è±¡
    export default new Vue()
    
    
    
    //æ•°æ®æ¥æ”¶æ–¹
    import bus from './eventBus.js'
    
    export default {
        data() {
            return {
                msgFromLeft:''
            }
        },
        created() {     //å½“ç»„ä»¶åˆ›å»ºæ—¶ï¼Œèµ‹å€¼ä¼ å…¥æ•°æ®
            bus.$on('share',val => {          //æ³¨å†Œshareäº‹ä»¶ï¼Œå°†ä¼ å…¥çš„msgèµ‹ç»™msgFromLeft
                this.msgFromLeft = val
            })
        }
    }
    ```

  - EventBusçš„ä½¿ç”¨æ­¥éª¤

    - åˆ›å»º**eventBus.js**æ¨¡å—ï¼Œå¹¶å‘å¤–å…±äº«ä¸€ä¸ª**Vueçš„å®ä¾‹å¯¹è±¡**
    - åœ¨æ•°æ®**å‘é€æ–¹**ï¼Œè°ƒç”¨**<u>bus.$emit</u>('äº‹ä»¶åç§°',è¦å‘é€çš„æ•°æ®)**æ–¹æ³•**è§¦å‘è‡ªå®šä¹‰äº‹ä»¶**
    - åœ¨æ•°æ®**æ¥æ”¶æ–¹**ï¼Œè°ƒç”¨**<u>bus.$on</u>('äº‹ä»¶åç§°'ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°)**æ–¹æ³•**æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶**





#### å…¨å±€äº‹ä»¶æ€»çº¿

- **ä¸€ç§å¯ä»¥å†ä»»æ„ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼**ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶

  - æ‰€æœ‰çš„ç»„ä»¶å¯¹è±¡éƒ½å¿…é¡»èƒ½çœ‹åˆ°å®ƒ
  - è¿™ä¸ªå¯¹è±¡å¿…é¡»èƒ½å¤Ÿä½¿ç”¨`$on` `$emit` `$off`æ–¹æ³•å»å¸®içš„é‚£ä¸ªã€è§¦å‘å’Œè§£ç»‘äº‹ä»¶

- ä½¿ç”¨æ­¥éª¤

  - å®šä¹‰å…¨å±€äº‹ä»¶æ€»çº¿

    ```js
    new Vue({
       	...
       	beforeCreate() {
       		Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$bus å°±æ˜¯å½“å‰åº”ç”¨çš„ vm
       	},
        ...
    })
    ```

  - ä½¿ç”¨äº‹ä»¶æ€»çº¿

    - æ¥å—æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­ç»™`$bus`ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«

      ```js
      export default {
          methods(){
              demo(data){...}
          }
          ...
          mounted() {
              this.$bus.$on('xxx',this.demo)
          }
      }
      ```

    - æä¾›æ•°æ®ï¼š`this.$bus.$emit('xxx',data)`

  - æœ€å¥½åœ¨`beforeDestroy`é’©å­ä¸­ï¼Œç”¨`$off`å»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶

- ```js
  //    src/main.js
  import Vue from 'vue'
  import App from './App.vue'
  
  Vue.config.productionTip = false
  
  new Vue({
    el:'#app',
    render: h => h(App),
    beforeCreate() {
      Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿
    }
  })
  
  //      src/App.vue
  <template>
  	<div class="app">
  		<School/>
  		<Student/>
  	</div>
  </template>
  
  <script>
  	import Student from './components/Student'
  	import School from './components/School'
  
  	export default {
  		name:'App',
  		components:{ School, Student }
  	}
  </script>
  
  <style scoped>.app{background-color: gray;padding: 5px;}</style>
  
  //     src/components/School.vue
  <template>
    <div class="school">
      <h2>å­¦æ ¡åç§°ï¼š{{ name }}</h2>
      <h2>å­¦æ ¡åœ°å€ï¼š{{ address }}</h2>
    </div>
  </template>
  
  <script>
    export default {
      name: "School",
      data() {
        return {
          name: "å°šç¡…è°·",
          address: "åŒ—äº¬",
        };
      },
      mounted() {  //ğŸ”´
        // console.log('School',this)
        this.$bus.$on("hello", (data) => {
          console.log("æˆ‘æ˜¯Schoolç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®", data);
        });
      },
      beforeDestroy() {  //ğŸ”´
        this.$bus.$off("hello");
      },
    };
  </script>
  
  <style scoped>.school {background-color: skyblue;padding: 5px;}</style>
  
  //        src/components/Student.vue
  <template>
    <div class="student">
      <h2>å­¦ç”Ÿå§“åï¼š{{ name }}</h2>
      <h2>å­¦ç”Ÿæ€§åˆ«ï¼š{{ sex }}</h2>
      <button @click="sendStudentName">æŠŠå­¦ç”Ÿåç»™Schoolç»„ä»¶</button> //ğŸ”´
    </div>
  </template>
  
  <script>
    export default {
      name:'Student',
      data() {
        return {
          name:'å¼ ä¸‰',
          sex:'ç”·'
        }
      },
      methods: {  //ğŸ”´
        sendStudentName(){
          this.$bus.$emit('demo', this.name)
        }
      }
    }
  </script>
  
  <style scoped>.student{background-color: pink;padding: 5px;margin-top: 30px;}</style>
  ```





#### è¿‡æ¸¡å’ŒåŠ¨ç”»

- `Vue`å°è£…çš„è¿‡æ¸¡ä¸åŠ¨ç”»ï¼šåœ¨æ’å…¥ã€æ›´æ–°æˆ–ç§»é™¤DOMæ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™ç»™å…ƒç´ æ·»åŠ æ ·å¼ç±»å

- ![image.png](https://cdn.nlark.com/yuque/0/2022/png/1379492/1643034414605-e2a3f595-ac72-4c74-9f11-12e7578592c9.png)

- å†™æ³•

  - å‡†å¤‡å¥½æ ·å¼

    - å…ƒç´ è¿›å…¥çš„æ ·å¼
      - `v-enter`          è¿›å…¥çš„èµ·ç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰
      - `v-enter-active`          è¿›å…¥è¿‡ç¨‹ä¸­ï¼ˆåŠ¨ç”»ä½¿ç”¨ï¼‰
      - `v-enter-to`               è¿›å…¥çš„ç»ˆç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰
    - å…ƒç´ ç¦»å¼€çš„æ ·å¼
      - `v-leave`                ç¦»å¼€çš„èµ·ç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰
      - `v-leave-active`          ç¦»å¼€è¿‡ç¨‹ä¸­ï¼ˆåŠ¨ç”»ä½¿ç”¨ï¼‰
      - `v-leave-to`            ç¦»å¼€çš„ç»ˆç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰

  - ä½¿ç”¨`<transition>`åŒ…è£¹è¦è¿‡æ¸¡çš„å…ƒç´ ï¼Œå¹¶é…ç½®`name`å±æ€§ï¼Œæ­¤æ—¶éœ€è¦å°†ä¸Šé¢æ ·å¼åçš„`v`æ¢æˆ`name`

  - è¦è®©é¡µé¢ä¸€å¼€å§‹å°±æ˜¾ç¤ºåŠ¨ç”»ï¼Œéœ€è¦æ·»åŠ **appear**

    ```html
    <transition name="hello" appear>
      <h1 v-show="isShow">ä½ å¥½å•Šï¼</h1>
    </transition>
    
    <style>
      .hello-enter-active{
        animation: hello 0.5s linear;
      }
    
      .hello-leave-active{
        animation: hello 0.5s linear reverse;
      }
    
      @keyframes hello {
        from{
          transform: translateX(-100%);
        }
        to{
          transform: translateX(0px);
        }
      }
    </style>
    ```

  - å¤‡æ³¨ï¼šå¦‚æœæœ‰å¤šä¸ªå…ƒç´ éœ€è¦è¿‡æ¸¡ï¼Œåˆ™éœ€è¦ä½¿ç”¨`<transition-group>`ï¼Œä¸”æ¯ä¸ªå…ƒç´ éƒ½éœ€è¦æŒ‡å®š`key`å€¼

    ```Vue
    <transition-group name="hello" appear>
      <h1 v-show="!isShow" key="1">ä½ å¥½å•Šï¼</h1>
      <h1 v-show="isShow" key="2">å°šç¡…è°·ï¼</h1>
    </transition-group>
    ```

  - ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“`Animate.css`

    ```Vue
    <transition-group appear
              name="animate__animated animate__bounce"
              enter-active-class="animate__swing"
              leave-active-class="animate__backOutUp">
      <h1 v-show="!isShow" key="1">ä½ å¥½å•Šï¼</h1>
      <h1 v-show="isShow" key="2">å°šç¡…è°·ï¼</h1>
    </transition-group>
    ```

    





#### refå¼•ç”¨

- ä»€ä¹ˆæ˜¯refå¼•ç”¨

  - refç”¨æ¥è¾…åŠ©å¼€å‘è€…åœ¨**ä¸ä¾èµ–äºjQueryçš„æƒ…å†µä¸‹**ï¼Œè·å–DOMå…ƒç´ æˆ–ç»„ä»¶çš„å¼•ç”¨

  - æ¯ä¸ªvueçš„ç»„ä»¶å®ä¾‹ä¸Šï¼Œéƒ½åŒ…å«ä¸€ä¸ª**$refså¯¹è±¡**ï¼Œé‡Œé¢å‚¨å­˜ç€å¯¹åº”çš„DOMå…ƒç´ æˆ–ç»„ä»¶çš„å¼•ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ**ç»„ä»¶çš„$refsæŒ‡å‘ä¸€ä¸ªç©ºå¯¹è±¡**

  - ä¾‹å­ï¼š

    ```js
    <h1 ref="myh1">Appæ ¹ç»„ä»¶</h1>
    <button @click="showThis">æ‰“å°this</button>
    
     methods: {
            showThis() {
                console.log(this.$refs.myh1);
                this.$refs.myh1.style.color = 'red'
            },
        },
    ```

- ä½¿ç”¨refå¼•ç”¨ç»„ä»¶å®ä¾‹

  - å¦‚æœæƒ³è¦ä½¿ç”¨ref**å¼•ç”¨é¡µé¢ä¸Šçš„ç»„ä»¶å®ä¾‹**ï¼Œåˆ™å¯ç”¨æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å¼è¿›è¡Œæ“ä½œï¼š

    ```js
    //ä½¿ç”¨refå±æ€§ï¼Œä¸ºå¯¹åº”çš„"ç»„ä»¶"æ·»åŠ å¼•ç”¨åç§°
    <my-counter ref="counterRef"></my-counter>
    <button @click="getRef">è·å–$refså¼•ç”¨</button>
    
    methods: {
        getRef() {
            //é€šè¿‡this.$refs.å¼•ç”¨çš„åç§°   å¯ä»¥å¼•ç”¨ç»„ä»¶çš„å®ä¾‹
            console.log(this.$refs.counterRef)
            //å¼•ç”¨åˆ°ç»„ä»¶çš„å®ä¾‹ä¹‹åï¼Œå°±å¯ä»¥è°ƒç”¨ç»„ä»¶ä¸Šçš„methodsæ–¹æ³•
            this.$refs.counterRef.add()
        }
    }
    ```

- this.**$nextTick(cb)**æ–¹æ³•

  - ç»„ä»¶çš„**$nextTick(cb)**æ–¹æ³•ï¼Œä¼šæŠŠcbå›è°ƒ**æ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªDOMæ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œ**ã€‚é€šä¿—çš„ç†è§£æ˜¯ï¼šç­‰ç»„ä»¶çš„DOMæ›´æ–°å®Œæˆä¹‹åï¼Œå†æ‰§è¡Œcbå›è°ƒå‡½æ•°ã€‚ä»è€Œèƒ½ä¿è¯cbå›è°ƒå‡½æ•°å¯ä»¥æ“ä½œåˆ°æœ€æ–°çš„DOMå…ƒç´ 
  - ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–°DOMè¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨nextTickæ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ





#### `mixin`æ··å…¥

- åŠŸèƒ½ï¼šå¯ä»¥æŠŠå¤šä¸ªç»„ä»¶**å…±ç”¨çš„é…ç½®**ï¼ˆå³Vueå®ä¾‹ä¸‹é¢çš„methodsï¼Œdataç­‰ï¼‰æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡

- ä½¿ç”¨æ–¹å¼

  - å®šä¹‰æ··å…¥

    ```js
    const mixin = {
        data() {....},
        methods: {....}
        ....
    }
    ```

  - ä½¿ç”¨æ··å…¥

    - å…¨å±€æ··å…¥`Vue.mixin(xxx)`
    - å±€éƒ¨æ··å…¥`mixins:['xxx']`

- å¤‡æ³¨

  - ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼è¿›è¡Œ'åˆå¹¶'ï¼Œå†å‘ç”Ÿå†²çªæ—¶ä»¥ç»„ä»¶ä¼˜å…ˆ

    ```js
    var mixin = {
    	data: function () {
    		return {
        		message: 'hello',
                foo: 'abc'
        	}
      	}
    }
    
    new Vue({
      	mixins: [mixin],
      	data () {
        	return {
          		message: 'goodbye',
                	bar: 'def'
        	}
        },
      	created () {
        	console.log(this.$data)
        	// => { message: "goodbye", foo: "abc", bar: "def" }
      	}
    })
    ```

  - åŒåç”Ÿå‘½å‘¨æœŸé’©å­å°†åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œ**å› æ­¤éƒ½å°†è¢«è°ƒç”¨**ã€‚å¦å¤–ï¼Œæ··å…¥å¯¹è±¡çš„é’©å­å°†åœ¨ç»„ä»¶è‡ªèº«é’©å­ä¹‹å‰è°ƒç”¨

    ```js
    var mixin = {
      	created () {
        	console.log('æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨')
      	}
    }
    
    new Vue({
      	mixins: [mixin],
      	created () {
        	console.log('ç»„ä»¶é’©å­è¢«è°ƒç”¨')
      	}
    })
    
    // => "æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨"
    // => "ç»„ä»¶é’©å­è¢«è°ƒç”¨"
    ```



#### `plugin`æ’ä»¶

- åŠŸèƒ½ï¼šç”¨äºå¢å¼º`Vue`

- æœ¬è´¨ï¼šåŒ…å«`install`æ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œ`install`çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`Vue`ï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®

- å®šä¹‰æ’ä»¶ï¼ˆæ”¾åœ¨å•ç‹¬çš„ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼‰ï¼ˆsrc/plugin.jsï¼‰

  ```js
  export default {
    install(Vue,x,y,z){
      console.log(x,y,z)
      //å…¨å±€è¿‡æ»¤å™¨
      Vue.filter('mySlice', function(value){return value.slice(0,4)})
  
      //å®šä¹‰å…¨å±€æŒ‡ä»¤
      Vue.directive('fbind',{
        //æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰
        bind(element,binding){element.value = binding.value},
        //æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶
        inserted(element,binding){element.focus()},
        //æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶
        update(element,binding){element.value = binding.value}
      })
  
      //å®šä¹‰æ··å…¥
      Vue.mixin({
        data() {return {x:100,y:200}},
      })
  
      //ç»™VueåŸå‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼ˆvmå’Œvcå°±éƒ½èƒ½ç”¨äº†ï¼‰
      Vue.prototype.hello = ()=>{alert('ä½ å¥½å•Š')}
    }
  }
  ```

- ä½¿ç”¨æ’ä»¶ï¼š`Vue.use()`

  - å¼•å…¥å¹¶ä½¿ç”¨åï¼Œå°±å¯ä»¥ä½¿ç”¨pluginä¸­å®šä¹‰çš„ä¸œè¥¿

- ```js
  //     src/main.js
  import Vue from 'vue'
  import App from './App.vue'
  import plugins from './plugins'	// å¼•å…¥æ’ä»¶
  
  Vue.config.productionTip = false
  
  Vue.use(plugins,1,2,3)	// åº”ç”¨ï¼ˆä½¿ç”¨ï¼‰æ’ä»¶
  
  new Vue({
  	el:'#app',
  	render: h => h(App)
  })
  
  //       src/components/School.vue
  <template>
    <div>
      <h2>å­¦æ ¡åç§°ï¼š{{ name | mySlice }}</h2>
      <h2>å­¦æ ¡åœ°å€ï¼š{{ address }}</h2>
      <button @click="test">ç‚¹æˆ‘æµ‹è¯•ä¸€ä¸ªhelloæ–¹æ³•</button>
    </div>
  </template>
  
  <script>
    export default {
      name:'School',
      data() {
        return {
          name:'å°šç¡…è°·atguigu',
          address:'åŒ—äº¬',
        }
      },
      methods: {
        test(){
          this.hello()
        }
      },
    }
  </script>
  
  //       src/components/Student.vue
  <template>
    <div>
      <h2>å­¦ç”Ÿå§“åï¼š{{ name }}</h2>
      <h2>å­¦ç”Ÿæ€§åˆ«ï¼š{{ sex }}</h2>
      <input type="text" v-fbind:value="name">
    </div>
  </template>
  
  <script>
    export default {
      name:'Student',
      data() {
        return {
          name:'å¼ ä¸‰',
          sex:'ç”·'
        }
      },
    }
  </script>
  ```

  
