## ç”Ÿå‘½å‘¨æœŸå’Œæ•°æ®å…±äº«

#### ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ

- ç”Ÿå‘½å‘¨æœŸå’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°
  - **ç”Ÿå‘½å‘¨æœŸ**ï¼ˆLife Cycleï¼‰æ˜¯æŒ‡ä¸€ä¸ªç»„ä»¶ä»**åˆ›å»º->è¿è¡Œ->é”€æ¯**çš„æ•´ä¸ªé˜¶æ®µï¼Œ**å¼ºè°ƒçš„æ˜¯ä¸€ä¸ªæ—¶é—´æ®µ**
  - **ç”Ÿå‘½å‘¨æœŸå‡½æ•°**ï¼šæ˜¯ç”±vueæ¡†æ¶æä¾›çš„**å†…ç½®å‡½æ•°**ï¼Œä¼šä¼´éšç€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œ**è‡ªåŠ¨æŒ‰æ¬¡åºæ‰§è¡Œ**
  - æ³¨æ„ï¼š**ç”Ÿå‘½å‘¨æœŸ**å¼ºè°ƒçš„æ˜¯**æ—¶é—´æ®µ**ï¼Œ**ç”Ÿå‘½å‘¨æœŸå‡½æ•°**å¼ºè°ƒçš„æ˜¯**æ—¶é—´ç‚¹**
- ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åˆ†ç±»
  - ç»„ä»¶åˆ›å»ºé˜¶æ®µ
  - ç»„ä»¶è¿è¡Œé˜¶æ®µ
  - ç»„ä»¶é”€æ¯é˜¶æ®µ
  - ![QQå›¾ç‰‡20220403221232](C:\Users\ZZY\Desktop\study\markdownæ’å›¾\QQå›¾ç‰‡20220403221232.png)
  - 
- ç”Ÿå‘½å‘¨æœŸå‡½æ•°
  - beforeCreate
    - ç»„ä»¶çš„**props/data/methods**å°šæœªè¢«åˆ›å»ºï¼Œéƒ½å¤„äº**ä¸å¯ç”¨**çŠ¶æ€
  - created
    - ç»„ä»¶çš„**props/data/methods**å·²åˆ›å»ºå¥½ï¼Œéƒ½å¤„äº**å¯ç”¨**çš„çŠ¶æ€ã€‚ä½†æ˜¯ç»„ä»¶çš„**æ¨¡æ¿ç»“æ„å°šæœªç”Ÿæˆ**
    - æ­¤å‡½æ•°å¸¸ç”¨äºè°ƒç”¨methodsä¸­çš„æ–¹æ³•**è¯·æ±‚æœåŠ¡å™¨çš„æ•°æ®**ï¼Œå¹¶ä¸”æŠŠè¯·æ±‚åˆ°çš„æ•°æ®**è½¬å­˜åˆ°dataä¸­**ï¼Œ**ä¾›**template**æ¨¡æ¿æ¸²æŸ“çš„æ—¶å€™ä½¿ç”¨**
  - beforeMount()
    - **å°†è¦æŠŠ**å†…å­˜ä¸­ç¼–è¯‘å¥½çš„**HTML**ç»“æ„**æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­**ã€‚æ­¤æ—¶æµè§ˆå™¨ä¸­**è¿˜æ²¡æœ‰**å½“å‰ç»„ä»¶çš„DOMç»“æ„
  - mounted()
    - å·²ç»æŠŠå†…å­˜ä¸­çš„HTMLç»“æ„ï¼ŒæˆåŠŸçš„æ¸²æŸ“åˆ°äº†æµè§ˆå™¨ä¹‹ä¸­ã€‚æ­¤æ—¶æµè§ˆå™¨ä¸­**å·²ç»åŒ…å«**äº†å½“å‰ç»„ä»¶çš„**DOMç»“æ„**
    - è¦æ“ä½œdomå…ƒç´ ï¼Œæœ€æ—©åªèƒ½åœ¨mountedå‡½æ•°ä¸­
  - -----------------------------------------ä¸Šæ–¹ä¸ºç»„ä»¶åˆ›å»ºé˜¶æ®µï¼Œä¸‹æ–¹ä¸ºç»„ä»¶è¿è¡Œé˜¶æ®µ---------------------------------------------------------------------------
  - beforeUpdate
    - **å°†è¦**æ ¹æ®å˜åŒ–è¿‡åæœ€æ–°çš„æ•°æ®ï¼Œ**é‡æ–°æ¸²æŸ“**ç»„ä»¶çš„æ¨¡æ¿ç»“æ„
    - æ­¤æ—¶æ•°æ®æ˜¯æ–°çš„ï¼Œä½†æ˜¯UIç»“æ„è¿˜æ˜¯æ—§çš„
  - updated()
    - å·²ç»æ ¹æ®æœ€æ–°çš„æ•°æ®ï¼Œ**å®Œæˆäº†**ç»„ä»¶DOMç»“æ„çš„**é‡æ–°æ¸²æŸ“**
    - å½“æ•°æ®å˜åŒ–ä¹‹åï¼Œä¸ºäº†èƒ½å¤Ÿæ“ä½œåˆ°æœ€æ–°çš„DOMç»“æ„ï¼Œå¿…é¡»æŠŠä»£ç å†™åˆ°updatedç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­
  - -----------------------------------------ä¸Šæ–¹ä¸ºç»„ä»¶è¿è¡Œé˜¶æ®µï¼Œä¸‹æ–¹ä¸ºç»„ä»¶é”€æ¯é˜¶æ®µ---------------------------------------------------------------------------
  - beforeDestroy
    - **å°†è¦é”€æ¯**æ­¤ç»„ä»¶ï¼Œæ­¤æ—¶**å°šæœªé”€æ¯**ï¼Œç»„ä»¶è¿˜å¤„äº**æ­£å¸¸å·¥ä½œ**çš„çŠ¶æ€
  - destroyed
    - ç»„ä»¶å·²ç»è¢«é”€æ¯ï¼Œæ­¤ç»„ä»¶åœ¨æµè§ˆå™¨ä¸­å¯¹åº”çš„**DOMç»“æ„**å·²è¢«**å®Œå…¨ç§»é™¤**
    - é”€æ¯å½“å‰ç»„ä»¶çš„æ•°æ®ä¾¦å¬å™¨ã€å­ç»„ä»¶ã€äº‹ä»¶ç›‘å¬
- æ€»ç»“
  - ![ç”Ÿå‘½å‘¨æœŸ.png](https://cdn.nlark.com/yuque/0/2022/png/1379492/1643297176928-5d5ac765-237c-462d-9188-84935e6c3c69.png?x-oss-process=image%2Fresize%2Cw_937%2Climit_0)
  - ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„thisæŒ‡å‘çš„æ˜¯`vm`æˆ–`ç»„ä»¶å®ä¾‹å¯¹è±¡`
  - å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­
    - `mounted`å‘é€`ajax`è¯·æ±‚ã€å¯åŠ¨å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€è®¢é˜…æ¶ˆæ¯ç­‰åˆå§‹åŒ–æ“ä½œ
    - `beforeDestroy`æ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰æ”¶å°¾å·¥ä½œ
  - å…³äºé”€æ¯`Vue`å®ä¾‹
    - é”€æ¯åå€ŸåŠ©`Vue`å¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯
    - é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆï¼Œä½†åŸç”Ÿ`DOM`äº‹ä»¶ä¾ç„¶æœ‰æ•ˆ
    - ä¸€èˆ¬ä¸ä¼šåœ¨`beforeDestroy`æ“ä½œæ•°æ®ï¼Œå› ä¸ºå³ä¾¿æ“ä½œæ•°æ®ï¼Œä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹äº†





#### ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«

- ç»„ä»¶ä¹‹é—´çš„å…³ç³»

  - åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œç»„ä»¶ä¹‹é—´çš„**æœ€å¸¸è§çš„å…³ç³»**åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç§ï¼š
    - **çˆ¶å­å…³ç³»**
    - **å…„å¼Ÿå…³ç³»**

- çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«

  - çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«åˆåˆ†ä¸ºï¼š
    - **çˆ¶ -> å­**å…±äº«æ•°æ®
    - å­ -> çˆ¶å…±äº«æ•°æ®

- çˆ¶ç»„ä»¶å‘å­ç»„ä»¶å…±äº«æ•°æ®

  - çˆ¶ç»„ä»¶å‘å­ç»„ä»¶å…±äº«æ•°æ®éœ€è¦ä½¿ç”¨**è‡ªå®šä¹‰å±æ€§**ã€‚

  - ç¤ºä¾‹ä»£ç ï¼š

    ```js
    //çˆ¶ç»„ä»¶
    <Son :msg="message" :user="userinfo"></Son>
    
    data() {
        return {
            message: 'hello vue.js',
            userinfo: {name:'zs',age:20}
        }
    }
    
    
    
    //å­ç»„ä»¶
    <template>
        <div>
             <h5>Sonç»„ä»¶</h5>
             <p>çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„msgå€¼æ˜¯ï¼š{{ msg }}</p>
             <p>çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„userå€¼æ˜¯ï¼š{{ user }}</p>
        </div>
    <?template>
                 
    props: ['msg','user']             
    ```

  - **æ³¨æ„ï¼šåœ¨ä¼ å€¼ä¹‹åä¸è¦ä¿®æ”¹propsä¸­å±æ€§çš„å€¼**

  - å› ä¸ºå¦‚æœç›´æ¥ç»™propsä¿®æ”¹èµ‹å€¼ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å­ç»„ä»¶ä¸­çš„è‡ªå®šä¹‰å±æ€§æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯çˆ¶å‘å­ä¼ çš„å¯¹è±¡ï¼›å¦‚æœç»™propså±æ€§å¯¹è±¡çš„å­å…ƒç´ ï¼ˆå¦‚user.nameï¼‰èµ‹å€¼ä¿®æ”¹ï¼Œåˆ™ä¼šå½±å“åˆ°çˆ¶å‘å­ä¼ é€’çš„é‚£ä¸ªå€¼æœ¬èº«ï¼Œä½¿å…¶ä¸€èµ·è¢«ä¿®æ”¹

- å­ç»„ä»¶å‘çˆ¶ç»„ä»¶å…±äº«æ•°æ®

  - å­ç»„ä»¶å‘çˆ¶ç»„ä»¶å…±äº«æ•°æ®ä½¿ç”¨**è‡ªå®šä¹‰äº‹ä»¶**

  - ç¤ºä¾‹ä»£ç ï¼š

    ```js
    //çˆ¶ç»„ä»¶
    //numchangeå³ä¸ºè‡ªå®šä¹‰äº‹ä»¶
    <Son @numchange="getNewCount"></Son>       
    //ä¸Šæ–¹ä¸ºç¬¬ä¸€æ­¥
    
    export default {
        data() {
            return { countFromSon: 0}
        },
        methods: {       //ä¸‹æ–¹ä¸ºç¬¬äºŒæ­¥
            getNewCount(val) {
                this.countFromSon = val
            }
        }
    }
        
    
    
    //å­ç»„ä»¶
    <p>countçš„å€¼æ˜¯{{ count }}</p>
    <button @click="add">+1</button>
    
    export default {
        data() {
            return { count: 0 }
        },
        methods: {
            add() {
                this.count += 1
                //ä¿®æ”¹æ•°æ®æ—¶ï¼Œé€šè¿‡ $emit()è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œä¸ºç¬¬ä¸‰æ­¥(this.countä¸ºnumchngeäº‹ä»¶éœ€è¦çš„å‚æ•°)
                this.$emit('numchange',this.count)
            }
        }
    }
    ```

- `v-model`å‚æ•°ï¼ˆç»“åˆpropå’Œè‡ªå®šä¹‰äº‹ä»¶ä¸€èµ·ï¼‰

  - é»˜è®¤æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸Šçš„ `v-model` ä½¿ç”¨ **`modelValue` ä½œä¸º prop å’Œ `update:modelValue` ä½œä¸ºäº‹ä»¶**ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘ `v-model` ä¼ é€’å‚æ•°æ¥ä¿®æ”¹è¿™äº›åç§°ï¼š

    ```html
    <my-component v-model:title="bookTitle"></my-component>
    ```
  
    åœ¨æœ¬ä¾‹ä¸­ï¼Œå­ç»„ä»¶å°†éœ€è¦ä¸€ä¸ª **`title`prop**å¹¶å‘å‡º **`update:title` äº‹ä»¶**æ¥è¿›è¡ŒåŒæ­¥ï¼š
  
    ```js
    app.component('my-component', {
      props: {
        title: String
      },
      emits: ['update:title'],           //ç”¨emitæ•°ç»„æ¥æ”¶è‡ªå®šä¹‰äº‹ä»¶åç§°ï¼Œåç§°å‘½åæ–¹å¼ä¸ºï¼šupdateï¼špropå
      template: `
        <input
          type="text"
          :value="title"
          @input="$emit('update:title', $event.target.value)">
      `
    })
    ```
  
  - ä¸Šé¢æ˜¯ç»‘å®šä¸€ä¸ªmodelï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥ç»‘å®šå¤šä¸ªmodel
  
    æ¯ä¸ª v-model å°†åŒæ­¥åˆ°ä¸åŒçš„ propï¼Œè€Œä¸éœ€è¦åœ¨ç»„ä»¶ä¸­æ·»åŠ é¢å¤–çš„é€‰é¡¹ï¼š
  
    ```js
    //htmlï¼ˆAppçˆ¶ç»„ä»¶éƒ¨åˆ†ï¼‰
    <user-name
      v-model:first-name="firstName"
      v-model:last-name="lastName"
    ></user-name>
    
    
    //jsï¼ˆå­ç»„ä»¶ï¼‰
    app.component('user-name', {
      props: {
        firstName: String,
        lastName: String
      },
      emits: ['update:firstName', 'update:lastName'],
      template: `
        <input 
          type="text"
          :value="firstName"
          @input="$emit('update:firstName', $event.target.value)">
    
        <input
          type="text"
          :value="lastName"
          @input="$emit('update:lastName', $event.target.value)">
      `
    })
    ```
  
    
  
- å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„æ•°æ®å…±äº«

  - åœ¨**vue2.x**ä¸­ï¼Œå…„å¼Ÿç»„ä»¶ä¹‹é—´æ•°æ®å…±äº«çš„æ–¹æ¡ˆæ˜¯**EventBus**(æˆ–è€…åµŒå¥—è¾ƒæ·±çš„ç¥–å…ˆå­å­™å…³ç³»)

  - ç¤ºä¾‹ä»£ç ï¼š

    ```js
    //æ•°æ®å‘é€æ–¹
    import bus from './eventBus.js'
    
    export default {
        data() {
            return {
                msg:'hello vue.js'
            }
        },
        methods: {
            sendMsg() {       //è§¦å‘shareäº‹ä»¶ï¼Œä¼ å‡ºthis.msg
                bus.$emit('share',this.msg)
            }
        }
    }
    
    
    //eventBus.js
    import Vue from 'vue'
    //å‘å¤–å…±äº«Vueçš„å®ä¾‹å¯¹è±¡
    export default new Vue()
    
    
    
    //æ•°æ®æ¥æ”¶æ–¹
    import bus from './eventBus.js'
    
    export default {
        data() {
            return {
                msgFromLeft:''
            }
        },
        created() {     //å½“ç»„ä»¶åˆ›å»ºæ—¶ï¼Œèµ‹å€¼ä¼ å…¥æ•°æ®
            bus.$on('share',val => {          //æ³¨å†Œshareäº‹ä»¶ï¼Œå°†ä¼ å…¥çš„msgèµ‹ç»™msgFromLeft
                this.msgFromLeft = val
            })
        }
    }
    ```

  - EventBusçš„ä½¿ç”¨æ­¥éª¤

    - åˆ›å»º**eventBus.js**æ¨¡å—ï¼Œå¹¶å‘å¤–å…±äº«ä¸€ä¸ª**Vueçš„å®ä¾‹å¯¹è±¡**
    - åœ¨æ•°æ®**å‘é€æ–¹**ï¼Œè°ƒç”¨**<u>bus.$emit</u>('äº‹ä»¶åç§°',è¦å‘é€çš„æ•°æ®)**æ–¹æ³•**è§¦å‘è‡ªå®šä¹‰äº‹ä»¶**
    - åœ¨æ•°æ®**æ¥æ”¶æ–¹**ï¼Œè°ƒç”¨**<u>bus.$on</u>('äº‹ä»¶åç§°'ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°)**æ–¹æ³•**æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶**





#### å…¨å±€äº‹ä»¶æ€»çº¿

- **ä¸€ç§å¯ä»¥å†ä»»æ„ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼**ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶

  - æ‰€æœ‰çš„ç»„ä»¶å¯¹è±¡éƒ½å¿…é¡»èƒ½çœ‹åˆ°å®ƒ
  - è¿™ä¸ªå¯¹è±¡å¿…é¡»èƒ½å¤Ÿä½¿ç”¨`$on` `$emit` `$off`æ–¹æ³•å»å¸®içš„é‚£ä¸ªã€è§¦å‘å’Œè§£ç»‘äº‹ä»¶

- ä½¿ç”¨æ­¥éª¤

  - å®šä¹‰å…¨å±€äº‹ä»¶æ€»çº¿

    ```js
    new Vue({
       	...
       	beforeCreate() {
       		Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$bus å°±æ˜¯å½“å‰åº”ç”¨çš„ vm
       	},
        ...
    })
    ```

  - ä½¿ç”¨äº‹ä»¶æ€»çº¿

    - æ¥å—æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­ç»™`$bus`ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«

      ```js
      export default {
          methods(){
              demo(data){...}
          }
          ...
          mounted() {
              this.$bus.$on('xxx',this.demo)
          }
      }
      ```

    - æä¾›æ•°æ®ï¼š`this.$bus.$emit('xxx',data)`

  - æœ€å¥½åœ¨`beforeDestroy`é’©å­ä¸­ï¼Œç”¨`$off`å»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶

- ```js
  //    src/main.js
  import Vue from 'vue'
  import App from './App.vue'
  
  Vue.config.productionTip = false
  
  new Vue({
    el:'#app',
    render: h => h(App),
    beforeCreate() {
      Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿
    }
  })
  
  //      src/App.vue
  <template>
  	<div class="app">
  		<School/>
  		<Student/>
  	</div>
  </template>
  
  <script>
  	import Student from './components/Student'
  	import School from './components/School'
  
  	export default {
  		name:'App',
  		components:{ School, Student }
  	}
  </script>
  
  <style scoped>.app{background-color: gray;padding: 5px;}</style>
  
  //     src/components/School.vue
  <template>
    <div class="school">
      <h2>å­¦æ ¡åç§°ï¼š{{ name }}</h2>
      <h2>å­¦æ ¡åœ°å€ï¼š{{ address }}</h2>
    </div>
  </template>
  
  <script>
    export default {
      name: "School",
      data() {
        return {
          name: "å°šç¡…è°·",
          address: "åŒ—äº¬",
        };
      },
      mounted() {  //ğŸ”´
        // console.log('School',this)
        this.$bus.$on("hello", (data) => {
          console.log("æˆ‘æ˜¯Schoolç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®", data);
        });
      },
      beforeDestroy() {  //ğŸ”´
        this.$bus.$off("hello");
      },
    };
  </script>
  
  <style scoped>.school {background-color: skyblue;padding: 5px;}</style>
  
  //        src/components/Student.vue
  <template>
    <div class="student">
      <h2>å­¦ç”Ÿå§“åï¼š{{ name }}</h2>
      <h2>å­¦ç”Ÿæ€§åˆ«ï¼š{{ sex }}</h2>
      <button @click="sendStudentName">æŠŠå­¦ç”Ÿåç»™Schoolç»„ä»¶</button> //ğŸ”´
    </div>
  </template>
  
  <script>
    export default {
      name:'Student',
      data() {
        return {
          name:'å¼ ä¸‰',
          sex:'ç”·'
        }
      },
      methods: {  //ğŸ”´
        sendStudentName(){
          this.$bus.$emit('demo', this.name)
        }
      }
    }
  </script>
  
  <style scoped>.student{background-color: pink;padding: 5px;margin-top: 30px;}</style>
  ```





#### è¿‡æ¸¡å’ŒåŠ¨ç”»

- `Vue`å°è£…çš„è¿‡æ¸¡ä¸åŠ¨ç”»ï¼šåœ¨æ’å…¥ã€æ›´æ–°æˆ–ç§»é™¤DOMæ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™ç»™å…ƒç´ æ·»åŠ æ ·å¼ç±»å

- å½“æ’å…¥æˆ–åˆ é™¤åŒ…å«åœ¨ `transition` ç»„ä»¶ä¸­çš„å…ƒç´ æ—¶ï¼ŒVue å°†ä¼šåšä»¥ä¸‹å¤„ç†ï¼š

  - è‡ªåŠ¨å—…æ¢ç›®æ ‡å…ƒç´ æ˜¯å¦åº”ç”¨äº† CSS è¿‡æ¸¡æˆ–åŠ¨ç”»ï¼Œå¦‚æœæ˜¯ï¼Œåœ¨æ°å½“çš„æ—¶æœºæ·»åŠ /åˆ é™¤ CSS ç±»åã€‚

  - å¦‚æœè¿‡æ¸¡ç»„ä»¶æä¾›äº† JavaScript é’©å­å‡½æ•° ï¼Œè¿™äº›é’©å­å‡½æ•°å°†åœ¨æ°å½“çš„æ—¶æœºè¢«è°ƒç”¨ã€‚

  - å¦‚æœæ²¡æœ‰æ‰¾åˆ° JavaScript é’©å­å¹¶ä¸”ä¹Ÿæ²¡æœ‰æ£€æµ‹åˆ° CSS è¿‡æ¸¡/åŠ¨ç”»ï¼ŒDOM æ“ä½œ (æ’å…¥/åˆ é™¤) åœ¨ä¸‹ä¸€å¸§ä¸­ç«‹å³æ‰§è¡Œã€‚(æ³¨æ„ï¼šæ­¤å¤„æŒ‡æµè§ˆå™¨é€å¸§åŠ¨ç”»æœºåˆ¶ï¼Œå’Œ Vue çš„ `nextTick` æ¦‚å¿µä¸åŒ)

    

- è¿‡æ¸¡class

  - ![image.png](https://cdn.nlark.com/yuque/0/2022/png/1379492/1643034414605-e2a3f595-ac72-4c74-9f11-12e7578592c9.png)

  - å†™æ³•

    - å‡†å¤‡å¥½æ ·å¼
      - å…ƒç´ è¿›å…¥çš„æ ·å¼
        - `v-enter-from`          è¿›å…¥çš„èµ·ç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰â€”â€”åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤ã€‚
        - `v-enter-active`          è¿›å…¥è¿‡ç¨‹ä¸­ï¼ˆåŠ¨ç”»ä½¿ç”¨ï¼‰â€”â€”åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚
        - `v-enter-to`               è¿›å…¥çš„ç»ˆç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰â€”â€”åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ `v-enter-from` è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚

      - å…ƒç´ ç¦»å¼€çš„æ ·å¼
        - `v-leave-from`                ç¦»å¼€çš„èµ·ç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰â€”â€”åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸‹ä¸€å¸§è¢«ç§»é™¤ã€‚
        - `v-leave-active`          ç¦»å¼€è¿‡ç¨‹ä¸­ï¼ˆåŠ¨ç”»ä½¿ç”¨ï¼‰â€”â€”åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚
        - `v-leave-to`            ç¦»å¼€çš„ç»ˆç‚¹ï¼ˆè¿‡æ¸¡ä½¿ç”¨ï¼‰â€”â€”åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ (ä¸æ­¤åŒæ—¶ `v-leave-from` è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚

    - è¿™é‡Œçš„æ¯ä¸ª class éƒ½å°†ä»¥è¿‡æ¸¡çš„åå­—æ·»åŠ å‰ç¼€ã€‚å¦‚æœä½ ä½¿ç”¨äº†ä¸€ä¸ªæ²¡æœ‰åå­—çš„ `<transition>`ï¼Œåˆ™ `v-` æ˜¯è¿™äº› class åçš„é»˜è®¤å‰ç¼€ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ ä½¿ç”¨äº† `<transition name="my-transition">`ï¼Œé‚£ä¹ˆ `v-enter-from` ä¼šæ›¿æ¢ä¸º `my-transition-enter-from`ã€‚

    - ä½¿ç”¨`<transition>`åŒ…è£¹è¦è¿‡æ¸¡çš„å…ƒç´ ï¼Œå¹¶é…ç½®`name`å±æ€§ï¼Œæ­¤æ—¶éœ€è¦å°†ä¸Šé¢**æ ·å¼åçš„`v`æ¢æˆ`name`**


â€‹    


- CSSè¿‡æ¸¡

  - CSS è¿‡æ¸¡æ˜¯æœ€å¸¸ç”¨çš„è¿‡æ¸¡ç±»å‹ä¹‹ä¸€

  - ä¾‹å­ï¼š

    ```html
    <div id="demo">
      <button @click="show = !show">
        Toggle render
      </button>
    
      <transition name="slide-fade">
        <p v-if="show">hello</p>
      </transition>
    </div>
    ```

    ```js
    const Demo = {
      data() {
        return {
          show: true
        }
      }
    }
    
    Vue.createApp(Demo).mount('#demo')
    ```

    ```css
    /* å¯ä»¥ä¸ºè¿›å…¥å’Œç¦»å¼€åŠ¨ç”»è®¾ç½®ä¸åŒçš„æŒç»­æ—¶é—´å’ŒåŠ¨ç”»å‡½æ•° */
    .slide-fade-enter-active {
      transition: all 0.3s ease-out;
    }
    
    .slide-fade-leave-active {
      transition: all 0.8s cubic-bezier(1, 0.5, 0.8, 1);
    }
    
    .slide-fade-enter-from,
    .slide-fade-leave-to {
      transform: translateX(20px);
      opacity: 0;
    }
    ```

    

- CSSåŠ¨ç”»

  - CSS åŠ¨ç”»ç”¨æ³•åŒ CSS è¿‡æ¸¡ï¼ŒåŒºåˆ«æ˜¯åœ¨åŠ¨ç”»ä¸­ `v-enter-from` ç±»åœ¨èŠ‚ç‚¹æ’å…¥ DOM åä¸ä¼šç«‹å³ç§»é™¤ï¼Œè€Œæ˜¯åœ¨ `animationend` äº‹ä»¶è§¦å‘æ—¶ç§»é™¤ã€‚

  - è¦è®©é¡µé¢ä¸€å¼€å§‹å°±æ˜¾ç¤ºåŠ¨ç”»ï¼Œéœ€è¦æ·»åŠ **appear**

    ```html
    <transition name="hello" appear>
      <h1 v-show="isShow">ä½ å¥½å•Šï¼</h1>
    </transition>
    
    <style>
      .hello-enter-active{
        animation: hello 0.5s linear;
      }
    
      .hello-leave-active{
        animation: hello 0.5s linear reverse;
      }
    
      @keyframes hello {
        from{
          transform: translateX(-100%);
        }
        to{
          transform: translateX(0px);
        }
      }
    </style>
    ```

  - å¤‡æ³¨ï¼šå¦‚æœæœ‰å¤šä¸ªå…ƒç´ éœ€è¦è¿‡æ¸¡ï¼Œåˆ™éœ€è¦ä½¿ç”¨`<transition-group>`ï¼Œä¸”**æ¯ä¸ªå…ƒç´ éƒ½éœ€è¦æŒ‡å®š`key`å€¼**

    ```html
    <transition-group name="hello" appear>
      <h1 v-show="!isShow" key="1">ä½ å¥½å•Šï¼</h1>
      <h1 v-show="isShow" key="2">å°šç¡…è°·ï¼</h1>
    </transition-group>
    ```

  - ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“`Animate.css`

    ```html
    <transition-group appear
              name="animate__animated animate__bounce"
              enter-active-class="animate__swing"
              leave-active-class="animate__backOutUp">
      <h1 v-show="!isShow" key="1">ä½ å¥½å•Šï¼</h1>
      <h1 v-show="isShow" key="2">å°šç¡…è°·ï¼</h1>
    </transition-group>
    ```

- åŒæ—¶ä½¿ç”¨è¿‡æ¸¡å’ŒåŠ¨ç”»

  - Vue ä¸ºäº†çŸ¥é“è¿‡æ¸¡ä½•æ—¶å®Œæˆï¼Œå¿…é¡»è®¾ç½®ç›¸åº”çš„äº‹ä»¶ç›‘å¬å™¨ã€‚å®ƒå¯ä»¥æ˜¯ `transitionend` æˆ– `animationend`ï¼Œè¿™å–å†³äºç»™å…ƒç´ åº”ç”¨çš„ CSS è§„åˆ™ã€‚å¦‚æœä½ åªä½¿ç”¨äº†å…¶ä¸­ä¸€ç§ï¼ŒVue èƒ½è‡ªåŠ¨è¯†åˆ«å…¶æ­£ç¡®ç±»å‹ã€‚
  - ä½†æ˜¯ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œä½ éœ€è¦ç»™åŒä¸€ä¸ªå…ƒç´ åŒæ—¶è®¾ç½®ä¸¤ç§è¿‡æ¸¡åŠ¨æ•ˆï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªé€šè¿‡ Vue è§¦å‘çš„ CSS åŠ¨ç”»ï¼Œå¹¶ä¸”åœ¨æ‚¬åœæ—¶ç»“åˆä¸€ä¸ª CSS è¿‡æ¸¡ã€‚åœ¨è¿™ç§æƒ…å†µä¸­ï¼Œä½ å°±éœ€è¦ä½¿ç”¨ `type` attribute å¹¶è®¾ç½® `animation` æˆ– `transition` æ¥æ˜¾å¼å£°æ˜ä½ éœ€è¦ Vue ç›‘å¬çš„ç±»å‹

- æ˜¾æ€§çš„è¿‡æ¸¡æŒç»­æ—¶é—´

  - é»˜è®¤æƒ…å†µä¸‹ï¼ŒVue ä¼šç­‰å¾…å…¶åœ¨è¿‡æ¸¡æ•ˆæœçš„æ ¹å…ƒç´ çš„ç¬¬ä¸€ä¸ª `transitionend` æˆ– `animationend` äº‹ä»¶ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å€™è¿™ä¹Ÿè®¸ä¸æ˜¯é¢„æœŸçš„è¡Œä¸ºâ€”â€”æ¯”å¦‚ï¼Œæˆ‘ä»¬ä¹Ÿè®¸æ‹¥æœ‰ä¸€ä¸ªç²¾å¿ƒç¼–æ’çš„ä¸€ç³»åˆ—è¿‡æ¸¡æ•ˆæœï¼Œå…¶ä¸­ä¸€äº›åµŒå¥—çš„å†…éƒ¨å…ƒç´ ç›¸æ¯”äºè¿‡æ¸¡æ•ˆæœçš„æ ¹å…ƒç´ å…·æœ‰å»¶è¿Ÿçš„æˆ–æ›´é•¿çš„è¿‡æ¸¡æ•ˆæœã€‚

  - åœ¨è¿™ç§æƒ…å†µä¸‹ä½ å¯ä»¥ç”¨ `<transition>` ç»„ä»¶ä¸Šçš„ `duration` prop æ˜¾å¼æŒ‡å®šè¿‡æ¸¡æŒç»­æ—¶é—´ (ä»¥æ¯«ç§’è®¡)ï¼š

    ```html
    <transition :duration="1000">...</transition>
    ```

  - ä½ ä¹Ÿå¯ä»¥åˆ†åˆ«æŒ‡å®šè¿›å…¥å’Œç¦»å¼€çš„æŒç»­æ—¶é—´ï¼š

    ```html
    <transition :duration="{ enter: 500, leave: 800 }">...</transition>
    ```

- JavaScripté’©å­

  - åœ¨transitionä¸­å£°æ˜JavaScripté’©å­

    ```html
    <transition
      @before-enter="beforeEnter"
      @enter="enter"
      @after-enter="afterEnter"
      @enter-cancelled="enterCancelled"
      @before-leave="beforeLeave"
      @leave="leave"
      @after-leave="afterLeave"
      @leave-cancelled="leaveCancelled"
      :css="false"
    >
      <!-- ... -->
    </transition>
    ```

  - è¿™äº›é’©å­å‡½æ•°å¯ä»¥ç»“åˆ CSS transitions/animations ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚

  - å½“åªç”¨ JavaScript è¿‡æ¸¡çš„æ—¶å€™ï¼Œåœ¨ **`enter` å’Œ `leave` é’©å­ä¸­å¿…é¡»ä½¿ç”¨ `done` è¿›è¡Œå›è°ƒ**ã€‚å¦åˆ™ï¼Œå®ƒä»¬å°†è¢«åŒæ­¥è°ƒç”¨ï¼Œè¿‡æ¸¡ä¼šç«‹å³å®Œæˆã€‚æ·»åŠ  `:css="false"` ä¹Ÿä¼šè®© Vue ä¼šè·³è¿‡ CSS çš„æ£€æµ‹ï¼Œé™¤äº†æ€§èƒ½ç•¥é«˜ä¹‹å¤–ï¼Œè¿™ä¹Ÿå¯ä»¥é¿å…è¿‡æ¸¡è¿‡ç¨‹ä¸­å—åˆ° CSS è§„åˆ™çš„æ„å¤–å½±å“ã€‚

  - ä¾‹å­ï¼š

    ```html
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.4/gsap.min.js"></script>
    
    <div id="demo">
      <button @click="show = !show">
        Toggle
      </button>
    
      <transition
        @before-enter="beforeEnter"
        @enter="enter"
        @leave="leave"
        :css="false"
      >
        <p v-if="show">
          Demo
        </p>
      </transition>
    </div>
    ```

    ```js
    const Demo = {
      data() {
        return {
          show: false
        }
      },
      methods: {
        beforeEnter(el) {
          gsap.set(el, {
            scaleX: 0.8,
            scaleY: 1.2
          })
        },
        enter(el, done) {
          gsap.to(el, {
            duration: 1,
            scaleX: 1.5,
            scaleY: 0.7,
            opacity: 1,
            x: 150,
            ease: 'elastic.inOut(2.5, 1)',
            onComplete: done
          })
        },
        leave(el, done) {
          gsap.to(el, {
            duration: 0.7,
            scaleX: 1,
            scaleY: 1,
            x: 300,
            ease: 'elastic.inOut(2.5, 1)'
          })
          gsap.to(el, {
            duration: 0.2,
            delay: 0.5,
            opacity: 0,
            onComplete: done
          })
        }
      }
    }
    
    Vue.createApp(Demo).mount('#demo')
    ```

- è¿‡æ¸¡æ¨¡å¼

  - æœ‰æ—¶æˆ‘ä»¬æ­£åœ¨å¤„ç†æ›´å¤æ‚çš„åŠ¨ä½œï¼Œéœ€è¦åè°ƒè¿›å…¥å’Œç¦»å¼€çš„çŠ¶æ€ã€‚æ‰€ä»¥ Vue æä¾›äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å·¥å…·ï¼Œç§°ä¹‹ä¸º**è¿‡æ¸¡æ¨¡å¼**ï¼šï¼ˆ`out-in` **æ˜¯å¤§å¤šæ•°æ—¶å€™æƒ³è¦çš„çŠ¶æ€**ï¼‰

    - `in-out`: æ–°å…ƒç´ å…ˆè¿›è¡Œè¿›å…¥è¿‡æ¸¡ï¼Œå®Œæˆä¹‹åå½“å‰å…ƒç´ è¿‡æ¸¡ç¦»å¼€ã€‚
    - `out-in`: å½“å‰å…ƒç´ å…ˆè¿›è¡Œç¦»å¼€è¿‡æ¸¡ï¼Œå®Œæˆä¹‹åæ–°å…ƒç´ è¿‡æ¸¡è¿›å…¥ã€‚

  - ç”¨ `out-in` æ›´æ–° on/off æŒ‰é’®çš„è½¬æ¢ï¼š

    ```html
    <transition name="fade" mode="out-in">
      <!-- ... the buttons ... -->
    </transition>
    ```

- å¤šä¸ªå…ƒç´ ä¹‹é—´çš„è¿‡æ¸¡

  - é€šè¿‡ `v-if`/`v-else` æ¥å®Œæˆå…ƒç´ ä¹‹é—´çš„è¿‡æ¸¡ï¼Œè®©å®ƒä»¬æ¯æ¬¡åªæ˜¾ç¤ºä¸€ä¸ªï¼Œå¦‚ï¼š

    ```html
    <transition>
      <table v-if="items.length > 0">
        <!-- ... -->
      </table>
      <p v-else>Sorry, no items found.</p>
    </transition>
    ```

  - å®é™…ä¸Šï¼Œé€šè¿‡ä½¿ç”¨ `v-if`/`v-else-if`/`v-else` æˆ–å°†å•ä¸ªå…ƒç´ ç»‘å®šåˆ°ä¸€ä¸ªåŠ¨æ€ å‚æ•°ï¼ˆdocStateï¼‰ï¼Œå¯ä»¥åœ¨ä»»æ„æ•°é‡çš„å…ƒç´ ä¹‹é—´è¿›è¡Œè¿‡æ¸¡

    ```html
    <transition>
      <button v-if="docState === 'saved'" key="saved">
        Edit
      </button>
      <button v-else-if="docState === 'edited'" key="edited">
        Save
      </button>
      <button v-else-if="docState === 'editing'" key="editing">
        Cancel
      </button>
    </transition>
    ```

  - ä¹Ÿå¯ä»¥å†™ä¸ºï¼š

    ```html
    <transition>
      <button :key="docState">
        {{ buttonMessage }}
      </button>
    </transition>
    ```

    ```js
    // ...
    computed: {
      buttonMessage() {
        switch (this.docState) {
          case 'saved': return 'Edit'
          case 'edited': return 'Save'
          case 'editing': return 'Cancel'
        }
      }
    }
    ```

- å¤šä¸ªç»„ä»¶ä¹‹é—´çš„è¿‡æ¸¡

  - ç»„ä»¶ä¹‹é—´çš„è¿‡æ¸¡æ›´ç®€å•â€”â€”ç”šè‡³ä¸éœ€è¦ `key` å±æ€§ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬åŒ…è£¹äº†ä¸€ä¸ªåŠ¨æ€ç»„ä»¶ ï¼š

    ```html
    <div id="demo">
      <input v-model="view" type="radio" value="v-a" id="a"><label for="a">A</label>
      <input v-model="view" type="radio" value="v-b" id="b"><label for="b">B</label>
      <transition name="component-fade" mode="out-in">
        <component :is="view"></component>
      </transition>
    </div>
    
    <--   é€šè¿‡v-modelç»‘å®šviewï¼Œå½“å•é€‰æ¡†é€‰æ‹©æ”¹å˜æ—¶ï¼Œviewè·å–åˆ°ç»‘å®šçš„valueå€¼ï¼Œåœ¨"v-a"å’Œ"v-b"ä¹‹é—´å˜åŒ–ï¼Œä»è€Œä½¿åŠ¨æ€ç»„ä»¶å˜åŒ–   -->
    ```

    ```js
    const Demo = {
      data() {
        return {
          view: 'v-a'
        }
      },
      components: {
        'v-a': {
          template: '<div>Component A</div>'
        },
        'v-b': {
          template: '<div>Component B</div>'
        }
      }
    }
    
    Vue.createApp(Demo).mount('#demo')
    ```

    ```css
    .component-fade-enter-active,
    .component-fade-leave-active {
      transition: opacity 0.3s ease;
    }
    
    .component-fade-enter-from,
    .component-fade-leave-to {
      opacity: 0;
    }
    ```

- åˆ—è¡¨è¿‡æ¸¡

  - æ€ä¹ˆåŒæ—¶æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ï¼Œæ¯”å¦‚ä½¿ç”¨ `v-for`ï¼Ÿåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ `<transition-group>` ç»„ä»¶ã€‚

  -  `<transition-group>` ç»„ä»¶çš„ç‰¹ç‚¹ï¼š

    - é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¸ä¼šæ¸²æŸ“ä¸€ä¸ªåŒ…è£¹å…ƒç´ ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡ `tag` attribute æŒ‡å®šæ¸²æŸ“ä¸€ä¸ªå…ƒç´ ã€‚
    - è¿‡æ¸¡æ¨¡å¼ ä¸å¯ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å†ç›¸äº’åˆ‡æ¢ç‰¹æœ‰çš„å…ƒç´ ã€‚
    - å†…éƒ¨å…ƒç´ **æ€»æ˜¯éœ€è¦**æä¾›**å”¯ä¸€çš„ `key` å€¼ã€‚**
    - CSS è¿‡æ¸¡çš„ç±»å°†ä¼šåº”ç”¨åœ¨å†…éƒ¨çš„å…ƒç´ ä¸­ï¼Œè€Œä¸æ˜¯è¿™ä¸ªç»„/å®¹å™¨æœ¬èº«ã€‚

  - åˆ—è¡¨çš„è¿›å…¥/ç¦»å¼€è¿‡æ¸¡

    - è¿›å…¥å’Œç¦»å¼€çš„è¿‡æ¸¡ä½¿ç”¨ä¹‹å‰ä¸€æ ·çš„ CSS ç±»å

  - åˆ—è¡¨çš„ç§»åŠ¨è¿‡æ¸¡

    - `<transition-group>` ç»„ä»¶è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ã€‚é™¤äº†è¿›å…¥å’Œç¦»å¼€ï¼Œå®ƒè¿˜å¯ä»¥ä¸ºå®šä½çš„æ”¹å˜æ·»åŠ åŠ¨ç”»ã€‚åªéœ€äº†è§£æ–°å¢çš„ **`v-move` ç±»**å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–°åŠŸèƒ½ï¼Œå®ƒä¼šåº”ç”¨åœ¨å…ƒç´ æ”¹å˜å®šä½çš„è¿‡ç¨‹ä¸­ã€‚

    - åƒä¹‹å‰çš„ç±»åä¸€æ ·ï¼Œå®ƒçš„å‰ç¼€å¯ä»¥é€šè¿‡ `name` attribute æ¥è‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `move-class` attribute æ‰‹åŠ¨è®¾ç½®ã€‚

    - è¿™ä¸ªç±»ä¸»è¦ç”¨äºæŒ‡å®šè¿‡æ¸¡æ—¶é•¿å’Œç¼“åŠ¨æ•ˆæœæ›²çº¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

      ```html
      <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>
      
      <div id="flip-list-demo">
        <button @click="shuffle">Shuffle</button>
        <transition-group name="flip-list" tag="ul">
          <li v-for="item in items" :key="item">
            {{ item }}
          </li>
        </transition-group>
      </div>
      ```

      ```js
      const Demo = {
        data() {
          return {
            items: [1, 2, 3, 4, 5, 6, 7, 8, 9]
          }
        },
        methods: {
          shuffle() {
            this.items = _.shuffle(this.items)
          }
        }
      }
      
      Vue.createApp(Demo).mount('#flip-list-demo')
      ```

      ```css
      .flip-list-move {
        transition: transform 0.8s ease;
      }
      ```

    - **æ³¨æ„ï¼šä½¿ç”¨ FLIP è¿‡æ¸¡çš„å…ƒç´ ä¸èƒ½è®¾ç½®ä¸º `display: inline`ã€‚ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œå¯ä»¥è®¾ç½®ä¸º `display: inline-block` æˆ–è€…å°†å…ƒç´ æ”¾ç½®äº flex å¸ƒå±€ä¸­ã€‚**

- çŠ¶æ€è¿‡æ¸¡

  - Vue çš„è¿‡æ¸¡ç³»ç»Ÿæä¾›äº†éå¸¸å¤šç®€å•çš„æ–¹æ³•æ¥è®¾ç½®è¿›å…¥ã€ç¦»å¼€å’Œåˆ—è¡¨çš„åŠ¨æ•ˆï¼Œé‚£ä¹ˆå¯¹äºæ•°æ®å…ƒç´ æœ¬èº«çš„åŠ¨æ•ˆå‘¢ï¼Ÿæ¯”å¦‚ï¼š

    - æ•°å­—å’Œè¿ç®—
    - é¢œè‰²çš„æ˜¾ç¤º
    - SVG èŠ‚ç‚¹çš„ä½ç½®
    - å…ƒç´ çš„å¤§å°å’Œå…¶ä»–çš„ property

  - è¿™äº›æ•°æ®è¦ä¹ˆæœ¬èº«å°±ä»¥æ•°å€¼å½¢å¼å­˜å‚¨ï¼Œè¦ä¹ˆå¯ä»¥è½¬æ¢ä¸ºæ•°å€¼ã€‚æœ‰äº†è¿™äº›æ•°å€¼åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»“åˆ Vue çš„å“åº”æ€§å’Œç»„ä»¶ç³»ç»Ÿï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ¥å®ç°åˆ‡æ¢å…ƒç´ çš„è¿‡æ¸¡çŠ¶æ€ã€‚

  - çŠ¶æ€åŠ¨ç”»ä¸ä¾¦å¬å™¨

    - é€šè¿‡ä¾¦å¬å™¨æˆ‘ä»¬èƒ½ç›‘å¬åˆ°ä»»ä½•æ•°å€¼ property çš„æ›´æ–°ã€‚

    - ```html
      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/gsap.min.js"></script>
      
      <div id="animated-number-demo">
        <input v-model.number="number" type="number" step="20" />
        <p>{{ animatedNumber }}</p>
      </div>
      ```

    - ```js
      const Demo = {
        data() {
          return {
            number: 0,
            tweenedNumber: 0
          }
        },
        computed: {
          animatedNumber() {
            return this.tweenedNumber.toFixed(0)
          }
        },
        watch: {
          number(newValue) {
            gsap.to(this.$data, { duration: 0.5, tweenedNumber: newValue })
          }
        }
      }
      
      Vue.createApp(Demo).mount('#animated-number-demo')
      ```

    - æ›´æ–°æ•°å­—æ—¶ï¼Œè¾“å…¥æ¡†ä¸‹æ–¹ä¼šå¯¹æ›´æ”¹è®¾ç½®åŠ¨ç”»æ•ˆæœã€‚

  - 

- 







#### refå¼•ç”¨

- ä»€ä¹ˆæ˜¯refå¼•ç”¨

  - refç”¨æ¥è¾…åŠ©å¼€å‘è€…åœ¨**ä¸ä¾èµ–äºjQueryçš„æƒ…å†µä¸‹**ï¼Œè·å–DOMå…ƒç´ æˆ–ç»„ä»¶çš„å¼•ç”¨

  - æ¯ä¸ªvueçš„ç»„ä»¶å®ä¾‹ä¸Šï¼Œéƒ½åŒ…å«ä¸€ä¸ª**$refså¯¹è±¡**ï¼Œé‡Œé¢å‚¨å­˜ç€å¯¹åº”çš„DOMå…ƒç´ æˆ–ç»„ä»¶çš„å¼•ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ**ç»„ä»¶çš„$refsæŒ‡å‘ä¸€ä¸ªç©ºå¯¹è±¡**

  - ä¾‹å­ï¼š

    ```js
    <h1 ref="myh1">Appæ ¹ç»„ä»¶</h1>
    <button @click="showThis">æ‰“å°this</button>
    
     methods: {
            showThis() {
                console.log(this.$refs.myh1);
                this.$refs.myh1.style.color = 'red'
            },
        },
    ```

- ä½¿ç”¨refå¼•ç”¨ç»„ä»¶å®ä¾‹

  - å¦‚æœæƒ³è¦ä½¿ç”¨ref**å¼•ç”¨é¡µé¢ä¸Šçš„ç»„ä»¶å®ä¾‹**ï¼Œåˆ™å¯ç”¨æŒ‰ç…§å¦‚ä¸‹çš„æ–¹å¼è¿›è¡Œæ“ä½œï¼š

    ```js
    //ä½¿ç”¨refå±æ€§ï¼Œä¸ºå¯¹åº”çš„"ç»„ä»¶"æ·»åŠ å¼•ç”¨åç§°
    <my-counter ref="counterRef"></my-counter>
    <button @click="getRef">è·å–$refså¼•ç”¨</button>
    
    methods: {
        getRef() {
            //é€šè¿‡this.$refs.å¼•ç”¨çš„åç§°   å¯ä»¥å¼•ç”¨ç»„ä»¶çš„å®ä¾‹
            console.log(this.$refs.counterRef)
            //å¼•ç”¨åˆ°ç»„ä»¶çš„å®ä¾‹ä¹‹åï¼Œå°±å¯ä»¥è°ƒç”¨ç»„ä»¶ä¸Šçš„methodsæ–¹æ³•
            this.$refs.counterRef.add()
        }
    }
    ```

- æ³¨æ„ï¼š`$refs` åªä¼šåœ¨ç»„ä»¶æ¸²æŸ“å®Œæˆä¹‹åç”Ÿæ•ˆã€‚è¿™ä»…ä½œä¸ºä¸€ä¸ªç”¨äºç›´æ¥æ“ä½œå­å…ƒç´ çš„â€œé€ƒç”Ÿèˆ±â€â€”â€”åº”è¯¥é¿å…åœ¨æ¨¡æ¿æˆ–è®¡ç®—å±æ€§ä¸­è®¿é—® `$refs`ã€‚

- this.**$nextTick(cb)**æ–¹æ³•

  - ç»„ä»¶çš„**$nextTick(cb)**æ–¹æ³•ï¼Œä¼šæŠŠcbå›è°ƒ**æ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªDOMæ›´æ–°å‘¨æœŸä¹‹åæ‰§è¡Œ**ã€‚é€šä¿—çš„ç†è§£æ˜¯ï¼šç­‰ç»„ä»¶çš„DOMæ›´æ–°å®Œæˆä¹‹åï¼Œå†æ‰§è¡Œcbå›è°ƒå‡½æ•°ã€‚ä»è€Œèƒ½ä¿è¯cbå›è°ƒå‡½æ•°å¯ä»¥æ“ä½œåˆ°æœ€æ–°çš„DOMå…ƒç´ 
  - ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–°DOMè¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨nextTickæ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œ





#### `mixin`æ··å…¥

- åŠŸèƒ½ï¼šå¯ä»¥æŠŠå¤šä¸ªç»„ä»¶**å…±ç”¨çš„é…ç½®**ï¼ˆå³Vueå®ä¾‹ä¸‹é¢çš„methodsï¼Œdataç­‰ï¼‰æå–æˆä¸€ä¸ªæ··å…¥å¯¹è±¡

- ä½¿ç”¨æ–¹å¼

  - å®šä¹‰æ··å…¥

    ```js
    const mixin = {
        data() {....},
        methods: {....}
        ....
    }
    ```

  - ä½¿ç”¨æ··å…¥

    - å…¨å±€æ··å…¥`Vue.mixin(xxx)`
    - å±€éƒ¨æ··å…¥`mixins:['xxx']`

- å¤‡æ³¨

  - ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼è¿›è¡Œ'åˆå¹¶'ï¼Œå†å‘ç”Ÿå†²çªæ—¶ä»¥ç»„ä»¶ä¼˜å…ˆ

    ```js
    var mixin = {
    	data: function () {
    		return {
        		message: 'hello',
                foo: 'abc'
        	}
      	}
    }
    
    new Vue({
      	mixins: [mixin],
      	data () {
        	return {
          		message: 'goodbye',
                	bar: 'def'
        	}
        },
      	created () {
        	console.log(this.$data)
        	// => { message: "goodbye", foo: "abc", bar: "def" }
      	}
    })
    ```

  - åŒåç”Ÿå‘½å‘¨æœŸé’©å­å°†åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œ**å› æ­¤éƒ½å°†è¢«è°ƒç”¨**ã€‚å¦å¤–ï¼Œæ··å…¥å¯¹è±¡çš„é’©å­å°†åœ¨ç»„ä»¶è‡ªèº«é’©å­ä¹‹å‰è°ƒç”¨

    ```js
    var mixin = {
      	created () {
        	console.log('æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨')
      	}
    }
    
    new Vue({
      	mixins: [mixin],
      	created () {
        	console.log('ç»„ä»¶é’©å­è¢«è°ƒç”¨')
      	}
    })
    
    // => "æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨"
    // => "ç»„ä»¶é’©å­è¢«è°ƒç”¨"
    ```



#### `plugin`æ’ä»¶

- åŠŸèƒ½ï¼šç”¨äºå¢å¼º`Vue`

- æœ¬è´¨ï¼šåŒ…å«`install`æ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œ`install`çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`Vue`ï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®

- å®šä¹‰æ’ä»¶ï¼ˆæ”¾åœ¨å•ç‹¬çš„ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼‰ï¼ˆsrc/plugin.jsï¼‰

  ```js
  export default {
    install(Vue,x,y,z){
      console.log(x,y,z)
      //å…¨å±€è¿‡æ»¤å™¨
      Vue.filter('mySlice', function(value){return value.slice(0,4)})
  
      //å®šä¹‰å…¨å±€æŒ‡ä»¤
      Vue.directive('fbind',{
        //æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰
        bind(element,binding){element.value = binding.value},
        //æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶
        inserted(element,binding){element.focus()},
        //æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶
        update(element,binding){element.value = binding.value}
      })
  
      //å®šä¹‰æ··å…¥
      Vue.mixin({
        data() {return {x:100,y:200}},
      })
  
      //ç»™VueåŸå‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼ˆvmå’Œvcå°±éƒ½èƒ½ç”¨äº†ï¼‰
      Vue.prototype.hello = ()=>{alert('ä½ å¥½å•Š')}
    }
  }
  ```

- ä½¿ç”¨æ’ä»¶ï¼š`Vue.use()`

  - å¼•å…¥å¹¶ä½¿ç”¨åï¼Œå°±å¯ä»¥ä½¿ç”¨pluginä¸­å®šä¹‰çš„ä¸œè¥¿

- ```js
  //     src/main.js
  import Vue from 'vue'
  import App from './App.vue'
  import plugins from './plugins'	// å¼•å…¥æ’ä»¶
  
  Vue.config.productionTip = false
  
  Vue.use(plugins,1,2,3)	// åº”ç”¨ï¼ˆä½¿ç”¨ï¼‰æ’ä»¶
  
  new Vue({
  	el:'#app',
  	render: h => h(App)
  })
  
  //       src/components/School.vue
  <template>
    <div>
      <h2>å­¦æ ¡åç§°ï¼š{{ name | mySlice }}</h2>
      <h2>å­¦æ ¡åœ°å€ï¼š{{ address }}</h2>
      <button @click="test">ç‚¹æˆ‘æµ‹è¯•ä¸€ä¸ªhelloæ–¹æ³•</button>
    </div>
  </template>
  
  <script>
    export default {
      name:'School',
      data() {
        return {
          name:'å°šç¡…è°·atguigu',
          address:'åŒ—äº¬',
        }
      },
      methods: {
        test(){
          this.hello()
        }
      },
    }
  </script>
  
  //       src/components/Student.vue
  <template>
    <div>
      <h2>å­¦ç”Ÿå§“åï¼š{{ name }}</h2>
      <h2>å­¦ç”Ÿæ€§åˆ«ï¼š{{ sex }}</h2>
      <input type="text" v-fbind:value="name">
    </div>
  </template>
  
  <script>
    export default {
      name:'Student',
      data() {
        return {
          name:'å¼ ä¸‰',
          sex:'ç”·'
        }
      },
    }
  </script>
  ```

  
