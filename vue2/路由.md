## è·¯ç”±

- å‰ç«¯è·¯ç”±çš„æ¦‚å¿µä¸åŸç†
  - ä»€ä¹ˆæ˜¯è·¯ç”±
    - è·¯ç”±ï¼ˆrouterï¼‰ï¼Œå°±æ˜¯**å¯¹åº”å…³ç³»**ï¼ˆkey-valueï¼‰
    - `key`ä¸ºè·¯å¾„ï¼Œ`value`ä¸ºfunctionæˆ–è€…component
  - è·¯ç”±çš„åˆ†ç±»
    - åç«¯è·¯ç”±
      - ç†è§£ï¼švalueæ˜¯functionï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚
      - å·¥ä½œè¿‡ç¨‹ï¼šæœåŠ¡ç«¯æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæ ¹æ®è¯·æ±‚è·¯å¾„æ‰¾åˆ°åŒ¹é…çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚ï¼Œè¿”å›ç›¸åº”æ•°æ®
    - å‰ç«¯è·¯ç”±
      - ç†è§£ï¼švalueæ˜¯componentï¼Œç”¨äºå±•ç¤ºé¡µé¢å†…å®¹
      - å·¥ä½œè¿‡ç¨‹ï¼šå½“è·¯å¾„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯¹åº”çš„ç»„ä»¶å°±ä¼šæ˜¾ç¤º
  - SPAï¼ˆå•é¡µé¢åº”ç”¨ç¨‹åºï¼‰ä¸å‰ç«¯è·¯ç”±
    - SPAæŒ‡çš„æ˜¯ä¸€ä¸ªwebç½‘ç«™åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªHTMLé¡µé¢**ï¼Œæ‰€æœ‰ç»„ä»¶çš„å±•ç¤ºä¸åˆ‡æ¢**éƒ½åœ¨è¿™å”¯ä¸€çš„ä¸€ä¸ªé¡µé¢å†…å®Œæˆã€‚æ­¤æ—¶ï¼Œ**ä¸åŒç»„ä»¶ä¹‹é—´çš„åˆ‡æ¢**éœ€è¦é€šè¿‡**å‰ç«¯è·¯ç”±**æ¥å®ç°
    - ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼š**Hashåœ°å€**ï¼ˆ#ï¼‰ä¸**ç»„ä»¶**ä¹‹é—´çš„**å¯¹åº”å…³ç³»**
    - Hashåœ°å€å°±æ˜¯åœ°å€ä¸­#åé¢çš„éƒ¨åˆ†
  - å‰ç«¯è·¯ç”±çš„å·¥ä½œæ–¹å¼
    - ç”¨æˆ·**ç‚¹å‡»äº†**é¡µé¢ä¸Šçš„**è·¯ç”±é“¾æ¥ï¼ˆaé“¾æ¥ï¼‰**
    - å¯¼è‡´äº†**URLåœ°å€æ **ä¸­çš„**Hashå€¼**å‘ç”Ÿäº†å˜åŒ–
    - **å‰ç«¯è·¯ç”±ç›‘å¬åˆ°äº†Hashåœ°å€çš„å˜åŒ–**
    - å‰ç«¯è·¯ç”±æŠŠå½“å‰**Hashåœ°å€å¯¹åº”çš„ç»„ä»¶**æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­
    - ç»“è®ºï¼šå‰ç«¯è·¯ç”±ï¼ŒæŒ‡çš„æ˜¯**Hashåœ°å€**ä¸**ç»„ä»¶ä¹‹é—´**çš„**å¯¹åº”å…³ç³»**



- vue-routerçš„åŸºæœ¬ä½¿ç”¨

  - ä»€ä¹ˆæ˜¯vue-router

    - vue-routeræ˜¯vue.jså®˜æ–¹ç»™å‡ºçš„è·¯ç”±è§£å†³æ–¹æ¡ˆã€‚ä»–åªèƒ½ç»“åˆvueé¡¹ç›®è¿›è¡Œä½¿ç”¨ï¼Œèƒ½å¤Ÿè½»æ¾åœ°ç®¡ç†SPAé¡¹ç›®ä¸­ç»„ä»¶çš„åˆ‡æ¢
    - vue-routerçš„å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š https://router.vuejs.org/zh/

  - vue-routerå®‰è£…å’Œé…ç½®çš„æ­¥éª¤

    - å®‰è£…vue-routeråŒ…

      - åœ¨vue2çš„é¡¹ç›®ä¸­ï¼Œå®‰è£…vue-routerçš„å‘½ä»¤å¦‚ä¸‹ï¼š

        ```js
        npm i vue-router@3.5.2 -S
        ```

    - **åˆ›å»ºè·¯ç”±æ¨¡å—**

      - åœ¨**src**æºä»£ç ç›®å½•ä¸‹ï¼Œæ–°å»º**router/index.js**è·¯ç”±æ¨¡å—ï¼Œå¹¶åˆå§‹åŒ–å¦‚ä¸‹çš„ä»£ç ï¼š

        ```js
        //1. å¯¼å…¥Vueå’ŒVueRouterçš„åŒ…
        import Vue from 'vue'
        import VueRouter from 'vue-router'
        
        // 2. è°ƒç”¨Vue.use()å‡½æ•°ï¼ŒæŠŠVueRouterå®‰è£…ä¸ºVueçš„æ’ä»¶
        Vue.use(VueRouter)
        
        // 3. åˆ›å»ºè·¯ç”±çš„å®ä¾‹å¯¹è±¡
        const router = new VueRouter()
        
        // 4. å‘å¤–å…±äº«è·¯ç”±çš„å®ä¾‹å¯¹è±¡
        export default router
        ```

    - å¯¼å…¥å¹¶æŒ‚è½½è·¯ç”±æ¨¡å—

      - é¦–å…ˆåœ¨main.jså¯¼å…¥

        ```js
        import router from '@/router/index.js'
        // åœ¨è¿›è¡Œæ¨¡å—åŒ–å¯¼å…¥çš„æ—¶å€™ï¼Œå¦‚æœç»™å®šçš„æ˜¯æ–‡ä»¶å¤¹ï¼Œåˆ™é»˜è®¤å¯¼å…¥è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œåå­—å«åšindex.jsçš„æ–‡ä»¶
        // æ•…ä¹Ÿå¯å†™ä¸ºï¼š import router from '@/router
        ```

      - ç„¶åå†ä¸‹æ–¹new Vueé‡Œé¢æŒ‚è½½

        ```js
        new Vue({
          render: h => h(App),
          // åœ¨Vueé¡¹ç›®ä¸­ï¼Œè¦æƒ³æŠŠè·¯ç”±ç”¨èµ·æ¥ï¼Œå¿…é¡»æŠŠè·¯ç”±å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹å¼è¿›è¡ŒæŒ‚è½½
          // routerï¼š è·¯ç”±çš„å®ä¾‹å¯¹è±¡
          router: router
        }).$mount('#app')
        ```

    - å£°æ˜**è·¯ç”±é“¾æ¥**å’Œ**å ä½ç¬¦**

      - åœ¨index.jsä¸­çš„åˆ›å»ºè·¯ç”±çš„å®ä¾‹å¯¹è±¡å¤„

        ```js
        // ä¸Šæ–¹è¦å¯¼å…¥ç»„ä»¶
        import Home from '@/components/Home.vue'
        import About from '@/components/About.vue'
        import Movie from '@/components/Movie.vue'
        
        // 3. åˆ›å»ºè·¯ç”±çš„å®ä¾‹å¯¹è±¡
        const router = new VueRouter({
          // routesæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½œç”¨ï¼š å®šä¹‰"hashåœ°å€" ä¸ "ç»„ä»¶"ä¹‹é—´çš„å¯¹åº”å…³ç³»
          routes: [
            { path: '/home', component: Home},
            { path: '/movie', component: Movie},
            { path: '/about', component: About}
          ]
        })
        ```

  - ä½¿ç”¨router-linkæ›¿ä»£aé“¾æ¥

    - ```html
          <!-- <a href="#/home">é¦–é¡µ</a> -->
          <router-link to="/home">é¦–é¡µ</router-link>
          <!-- <a href="#/movie">ç”µå½±</a> -->
          <router-link to="/movie">ç”µå½±</router-link>
          <!-- <a href="#/about">å…³äº</a> -->
          <router-link to="/about">å…³äº</router-link>
      ```

    - å¦‚æœä½¿ç”¨router-linkï¼Œé‚£ä¹ˆtoå°±ç›¸å½“äºhrefï¼Œç„¶å#å¯ä»¥çœç•¥ä¸ç”¨å†™

  - ä½¿ç”¨redirecté‡å®šå‘

    - è·¯ç”±é‡å®šå‘

      - è·¯ç”±é‡å®šå‘æŒ‡çš„æ˜¯ï¼š ç”¨æˆ·åœ¨è®¿é—®åœ°å€Açš„æ—¶å€™ï¼Œå¼ºåˆ¶ç”¨æˆ·è·³è½¬åˆ°åœ°å€Cï¼Œä»è€Œå±•ç¤ºç‰¹å®šçš„ç»„ä»¶é¡µé¢ã€‚é€šè¿‡è·¯ç”±è§„åˆ™çš„redirectå±æ€§ï¼ŒæŒ‡å®šä¸€ä¸ªæ–°çš„è·¯ç”±åœ°å€ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è®¾ç½®è·¯ç”±çš„é‡å®šå‘

        ```js
        const router = new VueRouter({
            // åœ¨routes æ•°ç»„ä¸­ï¼Œå£°æ˜è·¯ç”±çš„åŒ¹é…è§„åˆ™
            routes: [
                // å½“ç”¨æˆ·è®¿é—®/çš„æ—¶å€™ï¼Œé€šè¿‡redirectå±æ€§è·³è½¬åˆ°/homeå¯¹åº”çš„è·¯ç”±è§„åˆ™
                { path:'/', redirect: '/home'},
                { path: '/home', component: Home},
                { path: '/movie', component: Movie},
                { path: '/about', component: About}
            ]
        })
        ```

      

  - åµŒå¥—è·¯ç”±

    - é€šè¿‡è·¯ç”±å®ç°**ç»„ä»¶çš„åµŒå¥—å±•ç¤º**ï¼Œå«åšåµŒå¥—è·¯ç”±

    - é€šè¿‡childrenå±æ€§å£°æ˜å­è·¯ç”±è§„åˆ™

      - åœ¨src/router/index.jsè·¯ç”±æ¨¡å—ä¸­ï¼Œå¯¼å…¥éœ€è¦çš„ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨childrenå±æ€§å£°æ˜å­è·¯ç”±è§„åˆ™ï¼š

        ```js
        import Tab1 from '@/components/tabs/Tab1.vue'
        import Tab2 from '@/components/tabs/Tab2.vue'
        
        const router = new VueRouter({
            routes: [
                {  // abouté¡µé¢çš„è·¯ç”±è§„åˆ™ï¼ˆçˆ¶çº§è·¯ç”±è§„åˆ™ï¼‰
                    path: '/about',
                    component: About,
                    children: {  // 1.é€šè¿‡childrenå±æ€§ï¼ŒåµŒå¥—å£°æ˜å­çº§è·¯ç”±è§„åˆ™
                        { path: 'tab1', component:Tab1 }, // 2. è®¿é—®/about/tab1æ—¶ï¼Œå±•ç¤ºTab1ç»„ä»¶
                        { path: 'tab2', component:Tab2 }, // 2. è®¿é—®/about/tab2æ—¶ï¼Œå±•ç¤ºTab2ç»„ä»¶
                    }
                }
            ]
        })
        
        // æ³¨æ„ï¼šåœ¨å­è·¯ç”±ç»„ä»¶å‰é¢ä¸ç”¨åŠ   /
        ```

    - é»˜è®¤å­è·¯ç”±ï¼šå¦‚æœchildrenæ•°ç»„ä¸­ï¼ŒæŸä¸ªè·¯ç”±è§„åˆ™çš„pathå€¼ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è¿™æ¡è·¯ç”±è§„åˆ™ï¼Œå«åš"é»˜è®¤å­è·¯ç”±"

    

  - åŠ¨æ€è·¯ç”±åŒ¹é…

    - åŠ¨æ€è·¯ç”±çš„æ¦‚å¿µ

      - åŠ¨æ€è·¯ç”±æŒ‡çš„æ˜¯ï¼šæŠŠHashåœ°å€ä¸­**å¯å˜çš„éƒ¨åˆ†**å®šä¹‰ä¸º**å‚æ•°é¡¹**ï¼Œä»è€Œ**æé«˜è·¯ç”±è§„åˆ™çš„å¤ç”¨æ€§**

      - åœ¨vue-routerä¸­ä½¿ç”¨**è‹±æ–‡çš„å†’å·ï¼ˆ:ï¼‰**æ¥å®šä¹‰è·¯ç”±çš„å‚æ•°é¡¹ï¼Œç¤ºä¾‹ï¼š 

        ```js
        // è·¯ç”±ä¸­çš„åŠ¨æ€å‚æ•°ä»¥ : è¿›è¡Œå£°æ˜ï¼Œå†’å·åé¢çš„æ˜¯åŠ¨æ€å‚æ•°çš„åç§°
        { path: '/movie/:id',component: Movie}
        
        // å°†ä»¥ä¸‹ä¸‰ä¸ªè·¯ç”±è§„åˆ™ï¼Œåˆå¹¶æˆäº†ä¸€ä¸ªï¼Œæé«˜äº†è·¯ç”±è§„åˆ™çš„å¤ç”¨æ€§
        { path: '/movie/1',component: Movie}
        { path: '/movie/2',component: Movie}
        { path: '/movie/3',component: Movie}
        ```

    - ä¸ºè·¯ç”±è§„åˆ™å¼€å¯propsä¼ å‚

      - æ³¨æ„ä¸‹æ–¹index.jså¤„çš„propsæœ‰å¤šç§å†™æ³•ï¼š

        ```js
        {
        	name:'xiangqing',
        	path:'detail/:id',
        	component:Detail,
        
        	//ç¬¬ä¸€ç§å†™æ³•ï¼špropså€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­æ‰€æœ‰çš„key-valueçš„ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶
        	// props:{a:900}
        
        	//ç¬¬äºŒç§å†™æ³•ï¼špropså€¼ä¸ºå¸ƒå°”å€¼ï¼Œä¸ºtrueæ—¶ï¼Œåˆ™æŠŠè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ ç»™Detailç»„ä»¶
        	// props:true
        	
        	//ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶
        	props($route){
        		return {
        			id: $route.query.id,
        			title: $route.query.title
        		}
        	}
        }
        ```

        

      - ```js
          // App.vue
        <!-- <a href="#/home">é¦–é¡µ</a> -->
            <router-link to="/home">é¦–é¡µ</router-link>
            <!-- <a href="#/movie">ç”µå½±</a> -->
            <router-link to="/movie/1">ç”µå½±1</router-link>
            <router-link to="/movie/2">ç”µå½±2</router-link>
            <router-link to="/movie/3">ç”µå½±3</router-link>
            <!-- <a href="#/about">å…³äº</a> -->
            <router-link to="/about">å…³äº</router-link>
        
        
         //  index.js
            // åœ¨movieç»„ä»¶ä¸­ï¼Œå¸Œæœ›æ ¹æ®idçš„å€¼ï¼Œå±•ç¤ºå¯¹åº”ç”µå½±çš„è¯¦æƒ…ä¿¡æ¯
            // å¯ä»¥ä¸ºè·¯ç”±è§„åˆ™å¼€å¯propsä¼ å‚ï¼Œä»è€Œæ–¹ä¾¿çš„æ‹¿åˆ°åŠ¨æ€å‚æ•°çš„å€¼
            {
              path: '/movie/:id',
              component: Movie,
              props: true         // æ­¤å¤„çš„propsï¼štrueå°±æ˜¯å¼€å¯propsä¼ å‚
            },
                
                
        // movie.jsï¼Œæ­¤å¤„çš„this.$route.params.idå¯ä»¥è·å–åˆ°åŠ¨æ€å‚æ•°
                <template>
                            <div class="Movie-container">
                                <!-- this.$routeæ˜¯è·¯ç”±çš„â€˜å‚æ•°å¯¹è±¡â€™ -->
                                <!-- this.$routeræ˜¯è·¯ç”±çš„â€˜å¯¼èˆªå¯¹è±¡â€™ -->
                                 <h3>Movieç»„ä»¶ --- {{ this.$route.params.id }} --- {{ id }}</h3>
                            </div>   
                </template>
                
                
                <script>
                        export default {
                            name: 'Movie',
                            // æ¥æ”¶propsæ•°æ®
                            props: ['id']
                        }
                </script>
        ```

          

    - è·¯ç”±çš„paramså‚æ•°

      - é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥æ”¶`params`å‚æ•°
      
        ```js
        {
        	path:'/home',
        	component:Home,
        	children:[
        		{
        			path:'news',
        			component:News
        		},
        		{
        			component:Message,
        			children:[
        				{
        					name:'xiangqing',
        					path:'detail/:id/:title', // ğŸ”´ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°ï¼ˆæ­¤å¤„idï¼Œtitleéƒ½æ˜¯paramså‚æ•°ï¼‰
        					component:Detail
        				}
        			]
        		}
        	]
        }
        ```
      
      - ä¼ é€’å‚æ•°ï¼šè·¯ç”±æºå¸¦`params`å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨`toçš„å¯¹è±¡å†™æ³•`ï¼Œåˆ™**ä¸èƒ½ä½¿ç”¨`path`é…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨`name`é…ç½®**
      
        ```vue
        <!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• -->
        <router-link :to="/home/message/detail/666/ä½ å¥½">è·³è½¬</router-link>
        				
        <!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• -->
        <router-link 
        	:to="{
        		name:'xiangqing',
        		params:{
        		   id:666,
                   title:'ä½ å¥½'
        		}
        	}"
        >è·³è½¬</router-link>
        ```
      
      - æ¥æ”¶å‚æ•°
      
        ```js
        $route.params.id
        $route.params.title
        ```
      
        
      
    - æ‹“å±•queryå’ŒfullPath

      - ```html
         <router-link to="/movie/2?name=zs&age=20">ç”µå½±2</router-link>
        ```

      - åœ¨hashåœ°å€ä¸­ï¼Œ/åé¢çš„å‚æ•°é¡¹ï¼Œå«åš'è·¯å¾„å‚æ•°'ã€‚    åœ¨è·¯ç”±'å‚æ•°å¯¹è±¡'ä¸­ï¼Œéœ€è¦ä½¿ç”¨this.$route.paramsæ¥è®¿é—®è·¯å¾„å‚æ•°

      - åœ¨hashåœ°å€ä¸­ï¼Œ?åé¢çš„å‚æ•°é¡¹å«åš'æŸ¥è¯¢å‚æ•°' ã€‚       åœ¨è·¯ç”±'å‚æ•°å¯¹è±¡'ä¸­ï¼Œéœ€è¦ä½¿ç”¨this.$route.queryæ¥è®¿é—®æŸ¥è¯¢å‚æ•°

      - ```vue
         <!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• -->
         <router-link :to="`/home/message/detail?id=${m.id}&title=${m.title}`">è·³è½¬</router-link>
         				
         <!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³•ï¼ˆæ¨èï¼‰ -->
         <router-link 
         	:to="{
         		path:'/home/message/detail',
         		query:{
         		   id: m.id,
                    title: m.title
         		}
         	}"
         >è·³è½¬</router-link>
         ```
      
      - åœ¨this.$routeä¸­ï¼Œpathåªæ˜¯è·¯å¾„éƒ¨åˆ†çš„ï¼›fullPathæ˜¯å®Œæ•´çš„ï¼ˆåŒ…å«æŸ¥è¯¢å‚æ•°çš„ï¼‰åœ°å€
      
        

  - å‘½åè·¯ç”±

    - ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±çš„è·³è½¬

    - å¦‚ä½•ä½¿ç”¨ï¼š

      1. ç»™è·¯ç”±å‘½å

         ```js
         {
         	path:'/demo',
         	component:Demo,
         	children:[
         		{
         			path:'test',
         			component:Test,
         			children:[
         				{
                             name:'hello' // ç»™è·¯ç”±å‘½å
         					path:'welcome',
         					component:Hello,
         				}
         			]
         		}
         	]
         }
         ```

      2. ç®€åŒ–è·³è½¬

         ```vue
         <!--ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ -->
         <router-link to="/demo/test/welcome">è·³è½¬</router-link>
         
         <!--ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ -->
         <router-link :to="{name:'hello'}">è·³è½¬</router-link>
         
         <!--ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° -->
         <router-link 
         	:to="{
         		name:'hello',
         		query:{
         		    id:666,
                     title:'ä½ å¥½'
         		}
         	}"
         >è·³è½¬</router-link>
         ```

      

  - å£°æ˜å¼å¯¼èˆªå’Œç¼–ç¨‹å¼å¯¼èˆª

    - åœ¨æµè§ˆå™¨ä¸­ï¼Œ**ç‚¹å‡»é“¾æ¥**å®ç°å¯¼èˆªçš„æ–¹å¼ï¼Œå«åš**å£°æ˜å¼å¯¼èˆª**ã€‚å¦‚ï¼š

      - æ™®é€šç½‘é¡µä¸­ç‚¹å‡»**<a>é“¾æ¥**ã€vueé¡¹ç›®ä¸­ç‚¹å‡»**<router-link>**éƒ½å±äºå£°æ˜å¼å¯¼èˆª

    - åœ¨æµè§ˆå™¨ä¸­ï¼Œ**è°ƒç”¨APIæ–¹æ³•**å®ç°å¯¼èˆªçš„æ–¹å¼ï¼Œå«åš**ç¼–ç¨‹å¼å¯¼èˆª**ã€‚å¦‚ï¼š

      - æ™®é€šç½‘é¡µä¸­è°ƒç”¨**location.href**è·³è½¬åˆ°æ–°é¡µé¢çš„æ–¹å¼ï¼Œå±äºç¼–ç¨‹å¼å¯¼èˆª

    - vue-routerä¸­çš„ç¼–ç¨‹å¼å¯¼èˆªAPI

      - this.$router.**push**('hashåœ°å€')
        - è·³è½¬åˆ°æŒ‡å®šhashåœ°å€ï¼Œå¹¶**å¢åŠ **ä¸€æ¡å†å²è®°å½•
      - this.$router.**replace**('hashåœ°å€')
        - è·³è½¬åˆ°æŒ‡å®šhashåœ°å€ï¼Œå¹¶**æ›¿æ¢æ‰å½“å‰çš„**å†å²è®°å½•
      - this.$router.**go**(æ•°å€¼n)

    - $router.go

      - è°ƒç”¨this.$router.go()æ–¹æ³•ï¼Œå¯ä»¥åœ¨æµè§ˆå†å²ä¸­å‰è¿›å’Œåé€€ã€‚

      - ç¤ºä¾‹ä»£ç ï¼š

        ```js
        <template>
           <h3>MyMovieç»„ä»¶ --- {{ id }}</h3>
           <button @click="goBack">åé€€</button>
        </template>
        
        <script>
        export default {
           props: {'id'},
           methods: {
               goBack() {
                   this.$router.go(-1)    // åé€€åˆ°ä¹‹å‰çš„ç»„ä»¶é¡µé¢
               }
           }
        }       
        </script>
        ```

      - go(-1)è¡¨ç¤ºåé€€ä¸€å±‚

      - å¦‚æœåé€€çš„å±‚æ•°è¶…è¿‡ä¸Šé™ï¼Œåˆ™åŸåœ°ä¸åŠ¨

    - $router.**go**çš„ç®€åŒ–ç”¨æ³•

      - åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬åªä¼šå‰è¿›å’Œåé€€ä¸€å±‚é¡µé¢ã€‚å› æ­¤vue-routeræä¾›äº†å¦‚ä¸‹ä¸¤ä¸ªä¾¿æ·æ–¹æ³•ï¼š

        - $router.**back**()
          - åœ¨å†å²è®°å½•ä¸­ï¼Œ**åé€€**åˆ°ä¸Šä¸€ä¸ªé¡µé¢
        - $router.**forward**()
          - åœ¨å†å²è®°å½•ä¸­ï¼Œ**å‰è¿›**åˆ°ä¸‹ä¸€ä¸ªé¡µé¢

      - æ³¨æ„ï¼Œåœ¨è¡Œå†…ä½¿ç”¨ç¼–ç¨‹å¼å¯¼èˆªè·³è½¬çš„æ—¶å€™ï¼Œthiså¿…é¡»è¦çœç•¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚å¦‚ï¼š

        ```js
         <button @click="$router.back()">backåé€€</button>
         <button @click="$router.forward()">forwardå‰è¿›</button>
        ```

        

  - activatedå’Œdeactivated

    - `activated`å’Œ`deactivated`æ˜¯è·¯ç”±ç»„ä»¶ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€

    - å…·ä½“ä½¿ç”¨ï¼š

      - `activated`åœ¨è·¯ç”±ç»„ä»¶æ¿€æ´»æ—¶è§¦å‘
      - `decativated`åœ¨è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘

    - ```vue
      //  src/pages/News.vue
      
      <template>
          <ul>
              <li :style="{opacity}">æ¬¢è¿å­¦ä¹ vue</li>
              <li>news001 <input type="text"></li>
              <li>news002 <input type="text"></li>
              <li>news003 <input type="text"></li>
          </ul>
      </template>
      
      <script>
          export default {
              name:'News',
              data(){
                  return{
                      opacity:1
                  }
              },
              activated(){
                  console.log('Newsç»„ä»¶è¢«æ¿€æ´»äº†')
                  this.timer = setInterval(() => {
                      this.opacity -= 0.01
                      if(this.opacity <= 0) this.opacity = 1
                  },16)
              },
              deactivated(){
                  console.log('Newsç»„ä»¶å¤±æ´»äº†')
                  clearInterval(this.timer)
              }
          }
      </script>
      ```

      

  - å¯¼èˆªå®ˆå«

    - **å¯¼èˆªå®ˆå«**å¯ä»¥**æ§åˆ¶è·¯ç”±çš„è®¿é—®æƒé™**ã€‚

    - å…¨å±€å‰ç½®å®ˆå«

      - æ¯æ¬¡å‘ç”Ÿè·¯ç”±çš„**å¯¼èˆªè·³è½¬**æ—¶ï¼Œéƒ½ä¼šè§¦å‘**å…¨å±€å‰ç½®å®ˆå«**ã€‚å› æ­¤ï¼Œåœ¨å…¨å±€å‰ç½®å®ˆå«ä¸­ï¼Œç¨‹åºå‘˜å¯ä»¥å¯¹æ¯ä¸ªè·¯ç”±è¿›è¡Œ**è®¿é—®æƒé™**çš„æ§åˆ¶ï¼š

        ```js
        // åˆ›å»ºè·¯ç”±ç¤ºä¾‹å¯¹è±¡
        const router = new VueRouter({ ... })
                                      
        // è°ƒç”¨è·¯ç”±ç¤ºä¾‹å¯¹è±¡çš„beforeEachæ–¹æ³•ï¼Œå³å¯å£°æ˜'å…¨å±€å‰ç½®å®ˆå«'
        // æ¯æ¬¡å‘ç”Ÿè·¯ç”±å¯¼èˆªè·³è½¬çš„æ—¶å€™ï¼Œéƒ½ä¼šè‡ªåŠ¨è§¦å‘fnè¿™ä¸ª'å›è°ƒå‡½æ•°'
        router.beforeEach(fn)
        ```

    - å®ˆå«æ–¹æ³•çš„3ä¸ªå½¢å‚

      - å…¨å±€å‰ç½®å®ˆå«çš„å›è°ƒå‡½æ•°ä¸­æ¥å—3ä¸ªå½¢å‚ï¼Œæ ¼å¼ä¸ºï¼š

        ```js
        // åˆ›å»ºè·¯ç”±ç¤ºä¾‹å¯¹è±¡
        const router = new VueRouter({ ... })
                                      
        // å…¨å±€å‰ç½®å®ˆå«
        router.beforeEach((to,from,next) => {
            // toæ˜¯å°†è¦è®¿é—®çš„è·¯ç”±çš„ä¿¡æ¯å¯¹è±¡
            // fromæ˜¯å°†è¦ç¦»å¼€çš„è·¯ç”±çš„ä¿¡æ¯å¯¹è±¡
            // nextæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨next()è¡¨ç¤ºæ”¾è¡Œï¼Œå…è®¸è¿™æ¬¡è·¯ç”±å¯¼èˆª
        })
        ```

    - nextå‡½æ•°çš„3ç§è°ƒç”¨æ–¹å¼

      å½“ç”¨æˆ·åœ¨Homeé¦–é¡µè¦è·³è½¬åˆ°Mainåå°ä¸»é¡µ

      - å½“å‰ç”¨æˆ·**æ‹¥æœ‰**åå°ä¸»é¡µçš„è®¿é—®æƒé™ï¼Œç›´æ¥æ”¾è¡Œ:next()
      - å½“å‰ç”¨æˆ·**æ²¡æœ‰**åå°ä¸»é¡µçš„è®¿é—®æƒé™ï¼Œ**å¼ºåˆ¶å…¶è·³è½¬åˆ°ç™»å½•é¡µé¢**ï¼šnext('**/login**')
      - å½“å‰ç”¨æˆ·**æ²¡æœ‰**åå°ä¸»é¡µçš„è®¿é—®æƒé™ï¼Œ**ä¸å…è®¸è·³è½¬åˆ°åå°ä¸»é¡µ**ï¼šnext(**false**)          è¿™ä¸ªä¼šä¿ç•™åœ¨å½“å‰é¡µé¢

    - æ§åˆ¶è®¿é—®æƒé™

      - ```js
        if (to.path === '/main') {
            const token = localStorage.getItem('token')
            if (token) {
              next() // è®¿é—®çš„æ˜¯åå°ä¸»é¡µï¼Œä¸”æœ‰tokençš„å€¼
            } else {
              next('/login') // è®¿é—®çš„æ˜¯åå°ä¸»é¡µï¼Œä½†æ˜¯æ²¡æœ‰tokençš„å€¼
            }
          } else {
            next() // è®¿é—®çš„ä¸æ˜¯åå°ä¸»é¡µï¼Œç›´æ¥æ”¾è¡Œ
          }
        ```

    

  - è·¯ç”±å®ˆå«

    - ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶

    - åˆ†ç±»ï¼šå…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«

    - å…¨å±€å®ˆå«ï¼š**ï¼ˆåœ¨è·¯ç”±indexé¡µé¢new VueRouterå¤–é¢è¿›è¡Œå…¨å±€å®ˆå«ï¼‰**

      - `meta`ï¼šè·¯ç”±æºä¿¡æ¯

      - ```js
        // å…¨å±€å‰ç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢å‰æ‰§è¡Œ
        router.beforeEach((to,from,next) => {
        	console.log('beforeEach',to,from)
        	if(to.meta.isAuth){ // åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶
        		if(localStorage.getItem('school') === 'atguigu'){ // æƒé™æ§åˆ¶çš„å…·ä½“è§„åˆ™
        			next()	// æ”¾è¡Œ
        		}else{
        			alert('æš‚æ— æƒé™æŸ¥çœ‹')
        		}
        	}else{
        		next()	// æ”¾è¡Œ
        	}
        })
        
        // å…¨å±€åç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢åæ‰§è¡Œ
        router.afterEach((to,from) => {
        	console.log('afterEach',to,from)
        	if(to.meta.title){ 
        		document.title = to.meta.title //ä¿®æ”¹ç½‘é¡µçš„title
        	}else{
        		document.title = 'vue_test'
        	}
        })
        ```

    - ç‹¬äº«å®ˆå«**(åœ¨è·¯ç”±indexé¡µé¢new VueRouteræ—¶å¯¹å•ä¸ªè·¯ç”±å•ç‹¬æ·»åŠ å®ˆå«)**

      ```js
      beforeEnter(to,from,next){
      	console.log('beforeEnter',to,from)
          if(localStorage.getItem('school') === 'atguigu'){
              next()
          }else{
              alert('æš‚æ— æƒé™æŸ¥çœ‹')
          }
      }
      ```

      ç‹¬äº«è·¯ç”±å®ˆå«ä¾‹å­ï¼š

      ```js
      //         src/router.index.js
      
      //è¯¥æ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨
      import VueRouter from "vue-router";
      //å¼•å…¥ç»„ä»¶
      import Home from '../pages/Home'
      import About from '../pages/About'
      import News from '../pages/News'
      import Message from '../pages/Message'
      import Detail from '../pages/Detail'
      
      
      //åˆ›å»ºä¸€ä¸ªè·¯ç”±å™¨
      const router = new VueRouter({
          routes:[
              {
                  name:'guanyv',
                  path:'/about',
                  component:About,
                  meta:{title:'å…³äº'}
              },
              {
                  name:'zhuye',
                  path:'/home',
                  component:Home,
                  meta:{title:'ä¸»é¡µ'},
                  children:[
                      {
                          name:'xinwen',
                          path:'news',
                          component:News,
                          meta:{title:'æ–°é—»'},
                          // ğŸ”´ç‹¬äº«å®ˆå«ï¼Œç‰¹å®šè·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
                          beforeEnter(to,from,next){
                              console.log('ç‹¬äº«è·¯ç”±å®ˆå«',to,from)
                              if(localStorage.getItem('school') === 'atguigu'){
                                  next()
                              }else{
                                  alert('æš‚æ— æƒé™æŸ¥çœ‹')
                              }
                          }
                      },
                      {
                          name:'xiaoxi',
                          path:'message',
                          component:Message,
                          meta:{title:'æ¶ˆæ¯'},
                          children:[
                              {
                                  name:'xiangqing',
                                  path:'detail',
                                  component:Detail,
                                  meta:{title:'è¯¦æƒ…'},
                                  props($route){
                                      return {
                                          id:$route.query.id,
                                          title:$route.query.title,
                                      }
                                  }
                              }
                          ]
                      }
                  ]
              }
          ]
      })
      
      //å…¨å±€åç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨
      router.afterEach((to,from)=>{
      	console.log('åç½®è·¯ç”±å®ˆå«',to,from)
      	document.title = to.meta.title || 'ç¡…è°·ç³»ç»Ÿ'
      })
      
      //å¯¼å‡ºè·¯ç”±å™¨
      export default router
      ```

    - ç»„ä»¶å†…å®ˆå«**ï¼ˆåœ¨ç»„ä»¶é¡µé¢å•ç‹¬æ·»åŠ å®ˆå«ï¼‰**

      ```js
      //è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
      beforeRouteEnter (to, from, next) {... next()},
      
      //ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
      beforeRouteLeave (to, from, next) {... next()},
      ```

      ç»„ä»¶å†…å®ˆå«ä¾‹å­ï¼š

      ```vue
      <template>
          <h2>æˆ‘æ˜¯Aboutç»„ä»¶çš„å†…å®¹</h2>
      </template>
      
      <script>
          export default {
              name:'About',
              // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
              beforeRouteEnter (to, from, next) {
                  console.log('About--beforeRouteEnter',to,from)
                  if(localStorage.getItem('school')==='atguigu'){
                      next()
                  }else{
                      alert('å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒé™æŸ¥çœ‹ï¼')
                  }
              },
              // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨
              beforeRouteLeave (to, from, next) {
                  console.log('About--beforeRouteLeave',to,from)
                  next()
              }
          }
      </script>
      ```

      

  - è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼

    - å¯¹äºä¸€ä¸ª`url`æ¥è¯´ï¼Œä»€ä¹ˆæ˜¯`hashå€¼`ï¼Ÿ

      - `#`åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯`hashå€¼`

    - `hashå€¼`ä¸ä¼šåŒ…å«åœ¨`HTTP`è¯·æ±‚ä¸­ï¼Œå³ï¼š`hashå€¼`ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨

    - `hash`æ¨¡å¼

      - åœ°å€ä¸­æ°¸è¿œå¸¦ç€#å·ï¼Œä¸ç¾è§‚
      - è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•
      - å…¼å®¹æ€§è¾ƒå¥½

    - `history`æ¨¡å¼

      - åœ°å€å¹²å‡€ç¾è§‚
      - å…¼å®¹æ€§å’Œ`hash`æ¨¡å¼ç›¸æ¯”ç•¥å·®
      - åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡ç‚¹404çš„é—®é¢˜

    - ```js
      const router =  new VueRouter({
      	mode:'history',
      	routes:[...]
      })
      
      export default router
      ```

    - 

    - 

    - d

  - 

  - 

  - 

  - 

  - 

  - 

  - 

  - 

  - 

  - 

  - 

  - 

  - d

- 

- 













































