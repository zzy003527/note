```c
# include<stdio.h>
# include<string.h>
# include<stdlib.h>



typedef struct Link
{
	char name[20];  //姓名
	char phone[20];   //电话号码
	char relation[20];   //与号码所有者的关系
	struct Link* next;         //结构体指针
}LINK, * PLINK;
PLINK pHead;

void input(PLINK pHead);
void menu();
void inputdata(PLINK pHead);
void enquiry(PLINK p2);
void change(PLINK p2);
void del();
PLINK display(PLINK p1);


int main()
{
	int i;
	system("color 2e");
	menu();
	while (1)
	{
		printf("请输入你的选择(1---5)：");
	loop:scanf_s("%d", &i);
		if (i < 1 || i > 5)
		{
			printf("您输入的数字有误，请在1---5中选择：");
			goto loop;
		}
		switch (i)
		{
		case 1:inputdata(pHead);
			break;
		case 2:del();
			break;
		case 3:enquiry(pHead);
			break;
		case 4:change(pHead);
			break;
		case 5:exit(-1);
			break;
		}

	}


	return 0;
}

void menu()         //主菜单
{
	system("cls");
	printf("\n\n");         //控制主功能菜单显示位置
	printf("\t\t/*******************************通讯录管理系统**********************************/\n");
	printf("\t\t/1.新建联系人信息/\n");
	printf("\t\t/2.删除联系人信息/\n");
	printf("\t\t/3.查询联系人信息/\n");
	printf("\t\t/4.修改联系人信息/\n");
	printf("\t\t/5.退出系统/\n");
	printf("\t\t/*******************************************************************************/\n");

	printf("请选择功能（1---5）：\n");
}



void inputdata(PLINK pHead)                   //新建联系人信息
{
	{
		PLINK p1, p2;
		int i = 1;
		p1 = (PLINK)malloc(sizeof(LINK));
		p2 = (PLINK)malloc(sizeof(LINK));
		if (NULL == p1)
		{
			printf("分配失败，程序终止\n");
			exit(-1);
		}
		if (NULL == p2)
		{
			printf("分配失败，程序终止\n");
			exit(-1);
		}
		if (p1 != NULL)
		{
			pHead = p1;
			printf("\n\t\t\t***输入数据***\n");
			printf("在姓名处输入ok代表输入数据结束\n");
			while (i)
			{
				printf("姓名：");
				scanf_s(p1->name, "%s", &p1->name);
				if (strcmp(p1->name, "ok") == 0)
				{
					printf("输入完毕\n");
					printf("=================================================================\n");
					i = 0;
					p1 = p2;
					p2->next = NULL;
					free(p1);
				}
				else
				{
					printf("电话号码：");
					scanf_s(p1->phone, "%s", &p1->phone);
					printf("与电话所有者的关系：");
					scanf_s(p1->relation, "%s", &p1->relation);
					printf("=================================================================\n");
					p2 = p1;
					p1 = (PLINK)malloc(sizeof(LINK));
					if (p1 != NULL)
					{
						p2->next = p1;
					}
				}
			}

		}
	}


}

PLINK display(PLINK p1)                  //展示数据的函数
{
	printf("\n\t\t\t***显示数据***\n");
	while (p1 != NULL)
	{
		printf("姓名:%s\n", p1->name);
		printf("电话号码：%s\n", p1->phone);
		printf("与号码拥有者的关系：%s", p1->relation);
		printf("=================================================================\n");
		p1 = p1->next;
	}
	return p1;
}


void enquiry(PLINK p2)              //查询联系人信息
{
	char name[20] = { 0 };
	int b = 0;
	printf("\n\t\t\t***查看数据***\n");
	printf("请输入你要查找的人的姓名：");
	scanf_s(name, "%s\n", name);
	while (p2 != NULL)
	{
		if (strcmp(name, p2->name) == 0)
		{
			printf("你想查找的数据为：");
			printf("姓名:%s\n", p2->name);
			printf("电话号码：%s\t", p2->phone);
			printf("与号码拥有者的关系：%s\t", p2->relation);
			printf("=================================================================\n");
			b = 1;
		}
		p2 = p2->next;
	}
	if (b == 0)
	{
		printf("你想查找的人不存在\n");
	}
}



void change(PLINK p2)                //修改联系人信息
{
	char name[20] = { 0 };
	int b = 0, i;
	printf("\n\t\t\t***修改数据***\n");
	printf("请输入将要修改的人的姓名：");
	scanf_s(name, "%s", name);
	while (p2 != NULL)
	{
		if (strcmp(name, p2->name) == 0)
		{
			printf("将修改的人原基本信息为：");
			printf("姓名:%s\n", p2->name);
			printf("电话号码：%s\t", p2->phone);
			printf("与号码拥有者的关系：%s\t", p2->relation);
			printf("请选择需要修改的信息：\n");
			printf("\t1.姓名\t2.电话号码\t3.与号码所有者的关系\n");
			printf("您的选择是（1---3）：");
			scanf_s("%d", &i);
			printf("请输入修改后的内容：");
			switch (i)
			{
			case 1:printf("姓名：");
				scanf_s(p2->name, "%s", p2->name);
				break;
			case 2:printf("电话号码：");
				scanf_s(p2->phone, "%s", p2->phone);
				break;
			case 3:printf("与电话所有者的关系：");
				scanf_s(p2->relation, "%s", p2->relation);
				break;
			}
			printf("修改成功\n");
			printf("=================================================================\n");
			b = 1;
		}
		p2 = p2->next;
	}
	if (b == 0)
	{
		printf("没有找到该联系人\n");
	}
}



void del()               //删除联系人信息
{
	PLINK p1, p2;
	p2 = (PLINK)malloc(sizeof(LINK));
	char name[20] = { 0 };
	printf("\n\t\t\t***删除数据***\n");
	printf("请输入要删除的姓名：");

	scanf_s(name, "%s", name);
	p1 = pHead;
	if (pHead == NULL)
	{
		printf("内存为空\n");
		printf("=================================================================\n");
		return;
	}
	if (strcmp(name, p1->name) == 0)
	{
		pHead = p1->next;
		printf("删除成功");
		printf("=================================================================\n");
		return;
	}
	while (p1 != NULL && (strcmp(name, p1->name)) != 0)
	{
		p2 = p1;
		p1 = p1->next;
	}
	if (p1 == NULL)
	{
		printf("此人不存在");
		printf("=================================================================\n");
		return;
	}
	if (p1->next != NULL)
	{
		p1 = p1->next;
		p2->next = p1;
		printf("删除成功");
		printf("=================================================================\n");
		return;
	}
	else
	{
		p2->next = NULL;
		printf("删除成功");
		printf("=================================================================\n");
		return;
	}
}


```

